(window.webpackJsonp=window.webpackJsonp||[]).push([[44],{107:function(e,t,n){"use strict";n.r(t),n.d(t,"frontMatter",(function(){return b})),n.d(t,"rightToc",(function(){return c})),n.d(t,"default",(function(){return p}));n(0);var a=n(128);function r(){return(r=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e}).apply(this,arguments)}function l(e,t){if(null==e)return{};var n,a,r=function(e,t){if(null==e)return{};var n,a,r={},l=Object.keys(e);for(a=0;a<l.length;a++)n=l[a],t.indexOf(n)>=0||(r[n]=e[n]);return r}(e,t);if(Object.getOwnPropertySymbols){var l=Object.getOwnPropertySymbols(e);for(a=0;a<l.length;a++)n=l[a],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}var b={id:"unity-intro",title:"راه‌اندازی سریع"},c=[{value:"پیش‌نیاز‌ها",id:"پیشنیازها",children:[]},{value:"اضافه‌کردن پلاگین به پروژه",id:"اضافهکردن-پلاگین-به-پروژه",children:[]},{value:"اضافه‌کردن محتوای مانیفست",id:"اضافهکردن-محتوای-مانیفست",children:[]},{value:"اضافه‌کردن کدهای لازم برای رجیستر",id:"اضافهکردن-کدهای-لازم-برای-رجیستر",children:[{value:"اضافه‌کردن اسکریپت پوشه",id:"اضافهکردن-اسکریپت-پوشه",children:[]},{value:"واردکردن کد رجیستر در اسکریپت خود",id:"واردکردن-کد-رجیستر-در-اسکریپت-خود",children:[]}]},{value:"تست و ثبت دستگاه در پوشه",id:"تست-و-ثبت-دستگاه-در-پوشه",children:[{value:"مشاهده‌ی جزئیات رجیستر در لاگ‌کت",id:"مشاهدهی-جزئیات-رجیستر-در-لاگکت",children:[]}]}],i={rightToc:c},o="wrapper";function p(e){var t=e.components,n=l(e,["components"]);return Object(a.b)(o,r({},i,n,{components:t,mdxType:"MDXLayout"}),Object(a.b)("blockquote",null,Object(a.b)("p",{parentName:"blockquote"},"نسخه‌ی فعلی پلاگین فقط برای از سیستم‌عامل اندروید پشتیبانی می‌کند.")),Object(a.b)("blockquote",null,Object(a.b)("p",{parentName:"blockquote"},"نسخه‌ی یونیتی لازم 5.0 به بالاست.")),Object(a.b)("h2",{id:"پیشنیازها"},"پیش‌نیاز‌ها"),Object(a.b)("p",null,"قبل از شروع کار موارد زیر را بررسی و از درستی آنها اطمینان حاصل نمایید."),Object(a.b)("ul",null,Object(a.b)("li",{parentName:"ul"},"برای گذر از تحریم سرور‌های Jcenter از ابزار گذرازتحریم یا ... استفاده کنید."),Object(a.b)("li",{parentName:"ul"},Object(a.b)("inlineCode",{parentName:"li"},"MinSDKVersion")," >= 14"),Object(a.b)("li",{parentName:"ul"},Object(a.b)("inlineCode",{parentName:"li"},"TargetSDK")," >= 25 (نسخه‌های پایین‌تر هم ممکن است کار کنند اما تضمینی نیست.)"),Object(a.b)("li",{parentName:"ul"},"اپلیکیشن باید در کنسول ثبت‌شود. ",Object(a.b)("a",r({parentName:"li"},{href:"https://console.pushe.co"}),"Pushe console")),Object(a.b)("li",{parentName:"ul"},"توکن مانیفست از کنسول برداشته‌شود."),Object(a.b)("li",{parentName:"ul"},"دستگاه تست باید دارای گوگل‌پلی‌سرویس بوده و اینترنت آن فعال‌باشد.")),Object(a.b)("h2",{id:"اضافهکردن-پلاگین-به-پروژه"},"اضافه‌کردن پلاگین به پروژه"),Object(a.b)("br",null),Object(a.b)("p",null,"فایل پلاگین را از ",Object(a.b)("a",r({parentName:"p"},{href:"http://static.pushe.co/d/unity/Pushe1.7-unity1.3.unitypackage"}),"این لینک")," دانلود کرده و یکی از روش‌های زیر به پروژه اضافه‌کنید:"),Object(a.b)("ul",null,Object(a.b)("li",{parentName:"ul"},"در حالی که پروژه‌ در یونیتی باز است روی پکیج‌ دابل‌کلیک کنید تا به یونیتی اضافه‌شود و در دیالوگ بازشده گزینه‌ی ",Object(a.b)("inlineCode",{parentName:"li"},"import")," را انتخاب کنید."),Object(a.b)("li",{parentName:"ul"},"روی فولدر ",Object(a.b)("inlineCode",{parentName:"li"},"Assets")," راست‌کلیک کنید و ",Object(a.b)("inlineCode",{parentName:"li"},"import package -> Custom package")," را انتخاب‌کرده و آدرس پلاگین را که دانلود کرده‌اید به آن بدهید.")),Object(a.b)("h2",{id:"اضافهکردن-محتوای-مانیفست"},"اضافه‌کردن محتوای مانیفست"),Object(a.b)("blockquote",null,Object(a.b)("p",{parentName:"blockquote"},"محل فایل‌مانیفست ",Object(a.b)("inlineCode",{parentName:"p"},"Assets/plugin/Android/AndroidManifest.xml")," می‌باشد. در صورتی که این فایل موجود نیست آن‌را از آدرس زیر به آدرس ذکر‌شده کپی کنید:"),Object(a.b)("ul",{parentName:"blockquote"},Object(a.b)("li",{parentName:"ul"},Object(a.b)("inlineCode",{parentName:"li"},"C:\\Program Files\\Unity\\Editor\\Data\\PlaybackEngines\\androidplayer\\apk")))),Object(a.b)("p",null,"تگ مانیفست را از ",Object(a.b)("a",r({parentName:"p"},{href:"https://console.pushe.co"}),"کنسول پوشه")," دریافت‌کنید و در فایل ",Object(a.b)("inlineCode",{parentName:"p"},"AndroidManifest.xml")," خود اضافه کنید. تگ دریافتی باید کدی همانند زیر باشد:"),Object(a.b)("pre",null,Object(a.b)("code",r({parentName:"pre"},{className:"language-xml"}),'<meta-data android:name="co.ronash.pushe.token" android:value="{PUSHE_TOKEN}" />\n')),Object(a.b)("p",null,"به جای ",Object(a.b)("inlineCode",{parentName:"p"},"{PUSHE_TOKEN}")," باید توکن برنامه‌ی خود را قرار دهید."),Object(a.b)("p",null,"و محل اضافه‌کردن آن در فایل ",Object(a.b)("inlineCode",{parentName:"p"},"AndroidManifest")," باید مطابق زیر باشد:"),Object(a.b)("pre",null,Object(a.b)("code",r({parentName:"pre"},{className:"language-xml"}),'<manifest ...>\n    <application ...>\n        ...\n        \x3c!-- تگ باید در اینجا قرار گیرد --\x3e\n        <meta-data android:name="co.ronash.pushe.token" android:value="{PUSHE_TOKEN}" />\n    </application>\n</manifest>\n')),Object(a.b)("p",null,"برای استفاده از ",Object(a.b)("strong",{parentName:"p"},"امکان ارسال اعلان با استفاده‌از موقعیت مکانی")," پرمیشن لوکیشن را نیز به مانیفست اضافه‌کنید:"),Object(a.b)("pre",null,Object(a.b)("code",r({parentName:"pre"},{className:"language-xml"}),'<uses-permission android:name="android.permission.ACCESS_COARSE_LOCATION"/>\n')),Object(a.b)("p",null,"سپس در صورت Resolve نشدن Jar resolver آنرا ",Object(a.b)("inlineCode",{parentName:"p"},"Force resolve")," کنید:"),Object(a.b)("img",{src:"/img/unity/force_resolve.png"}),Object(a.b)("br",null),Object(a.b)("br",null),Object(a.b)("blockquote",null,Object(a.b)("p",{parentName:"blockquote"},"دقت کنید که در این مرحله نیاز به ",Object(a.b)("strong",{parentName:"p"},"فعال‌بودن ابزار گذر از تحریم")," دارید.")),Object(a.b)("p",null,"در صورتی که پیغام ",Object(a.b)("strong",{parentName:"p"},"Resolution succeed")," را مشاهده‌ نمودید و فایل‌های لازم پوشه به در کنار فایل مانیفست اضافه‌شدند،‌ بدین معنی‌ست که کدهای پوشه در پروژه قابل استفاده هستند."),Object(a.b)("h2",{id:"اضافهکردن-کدهای-لازم-برای-رجیستر"},"اضافه‌کردن کدهای لازم برای رجیستر"),Object(a.b)("p",null,"دو راه برای رجیسترکردن دستگاه در پوشه وجود دارد:"),Object(a.b)("ul",null,Object(a.b)("li",{parentName:"ul"},"اضافه‌کردن اسکریپت پوشه"),Object(a.b)("li",{parentName:"ul"},"اضافه‌کردن کد پوشه به اسکریپت خود")),Object(a.b)("h3",{id:"اضافهکردن-اسکریپت-پوشه"},"اضافه‌کردن اسکریپت پوشه"),Object(a.b)("p",null,"در مسیر ",Object(a.b)("inlineCode",{parentName:"p"},"Assets > Pushe")," فایلی به نام ",Object(a.b)("inlineCode",{parentName:"p"},"Pushe.cs")," را به ",Object(a.b)("inlineCode",{parentName:"p"},"Hierarchy")," پروژه‌ی خود (مثلا Main camera) اضافه‌کنید. بدین منظور فایل را به گیم‌آبجکت خود ",Object(a.b)("strong",{parentName:"p"},"Drag and drop")," کنید."),Object(a.b)("h3",{id:"واردکردن-کد-رجیستر-در-اسکریپت-خود"},"واردکردن کد رجیستر در اسکریپت خود"),Object(a.b)("p",null,"در صورتی که قصد دارید در اسکریپت خود عملیات رجیسترکردن پوشه را انجام‌دهید، کد زیر را به اسکریپت‌ خود اضافه‌کنید:"),Object(a.b)("pre",null,Object(a.b)("code",r({parentName:"pre"},{className:"language-cpp"}),"// void Start() {\n\n    Pushe.Pushe.Initialize();\n// }\n")),Object(a.b)("p",null,"اگر در تابع بالا مقدار ورودی تابع ",Object(a.b)("inlineCode",{parentName:"p"},"true")," گذاشته شود و دستگاه کاربر شما گوگل پلی سرویس نداشته باشد و یا آن را غیرفعال کرده باشد دیالوگی باز می شود و به کاربر پیشنهاد نصب گوگل پلی سرویس داده می شود تا قابلیت دریافت و ارسال پوش نوتیفیکیشن فعال شود. اگر در تابع بالا ",Object(a.b)("inlineCode",{parentName:"p"},"false")," را قرار دهید، این دیالوگ برای کاربر باز نمی شود.\nمقدار پیش‌فرض در صورت واردنکردن ورودی ",Object(a.b)("inlineCode",{parentName:"p"},"true")," می‌باشد."),Object(a.b)("h2",{id:"تست-و-ثبت-دستگاه-در-پوشه"},"تست و ثبت دستگاه در پوشه"),Object(a.b)("p",null,"پس از اجرای برنامه در دستگاه (دارای گوگل‌پلی‌سرویس و متصل به اینترنت) پس از مدت کوتاهی انتظار بایستی نصب شما در پوشه ثبت ‌شود.\nبرای اطلاع از جزئیات و مشاهده‌ی خطاهای احتمالی می‌توانید از ",Object(a.b)("strong",{parentName:"p"},"لاگ‌کت")," استفاده کنید."),Object(a.b)("h3",{id:"مشاهدهی-جزئیات-رجیستر-در-لاگکت"},"مشاهده‌ی جزئیات رجیستر در لاگ‌کت"),Object(a.b)("blockquote",null,Object(a.b)("p",{parentName:"blockquote"},"در اندروید استودیو لاگ‌کت از ابزار موجود است. در صورتی که از ابزار دیگری مانند VSCode استفاده‌ می‌کنید می‌توانید از هر روشی برای مشاهده‌ی لاگ استفاده کنید. ",Object(a.b)("a",r({parentName:"p"},{href:"https://developer.android.com/studio/command-line/logcat"}),"مستندات اندروید برای لاگ‌کت"))),Object(a.b)("p",null,"برای مشاهده‌ی بهتر لاگ‌ها می‌توانید فیلتر ",Object(a.b)("inlineCode",{parentName:"p"},"Pushe")," را روی لاگ‌ها اعمال کنید."),Object(a.b)("pre",null,Object(a.b)("code",r({parentName:"pre"},{className:"language-bash"}),"# Android logcat:\n\n--------+ Started Initialization of Pushe 1.7 +--------\nTrying to register to Pushe\nSuccessfully registered to pushe\n")),Object(a.b)("p",null,"در صورتی که در یکی از این مراحل مشکلی وجود داشت، ابتدا ",Object(a.b)("a",r({parentName:"p"},{href:"unity-faq"}),"سوالات متداول")," را بررسی کنید و در صورتی نیافتن مشکل آن را در ",Object(a.b)("a",r({parentName:"p"},{href:"https://github.com/pusheco/unity-sample/issues?utf8=%E2%9C%93&q=is%3Aissue"}),"Github issue")," مطرح کنید."),Object(a.b)("p",null,"برای مشاهده‌ی امکانات و قابلیت‌های بیشتر پوشه در یونیتی به مطالعه‌ی ادامه‌ی مستندات بپردازید."))}p.isMDXComponent=!0},128:function(e,t,n){"use strict";n.d(t,"a",(function(){return c})),n.d(t,"b",(function(){return u}));var a=n(0),r=n.n(a),l=r.a.createContext({}),b=function(e){var t=r.a.useContext(l),n=t;return e&&(n="function"==typeof e?e(t):Object.assign({},t,e)),n},c=function(e){var t=b(e.components);return r.a.createElement(l.Provider,{value:t},e.children)};var i="mdxType",o={inlineCode:"code",wrapper:function(e){var t=e.children;return r.a.createElement(r.a.Fragment,{},t)}},p=Object(a.forwardRef)((function(e,t){var n=e.components,a=e.mdxType,l=e.originalType,c=e.parentName,i=function(e,t){var n={};for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&-1===t.indexOf(a)&&(n[a]=e[a]);return n}(e,["components","mdxType","originalType","parentName"]),p=b(n),u=a,s=p[c+"."+u]||p[u]||o[u]||l;return n?r.a.createElement(s,Object.assign({},{ref:t},i,{components:n})):r.a.createElement(s,Object.assign({},{ref:t},i))}));function u(e,t){var n=arguments,a=t&&t.mdxType;if("string"==typeof e||a){var l=n.length,b=new Array(l);b[0]=p;var c={};for(var o in t)hasOwnProperty.call(t,o)&&(c[o]=t[o]);c.originalType=e,c[i]="string"==typeof e?e:a,b[1]=c;for(var u=2;u<l;u++)b[u]=n[u];return r.a.createElement.apply(null,b)}return r.a.createElement.apply(null,n)}p.displayName="MDXCreateElement"}}]);