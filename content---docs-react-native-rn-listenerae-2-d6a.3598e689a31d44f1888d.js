/*! For license information please see content---docs-react-native-rn-listenerae-2-d6a.3598e689a31d44f1888d.js.LICENSE */
(window.webpackJsonp=window.webpackJsonp||[]).push([[97],{192:function(e,t,n){"use strict";n.r(t),n.d(t,"frontMatter",(function(){return i})),n.d(t,"rightToc",(function(){return o})),n.d(t,"default",(function(){return s}));n(0);var a=n(297),r=n(299),l=n(300);function c(){return(c=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e}).apply(this,arguments)}function b(e,t){if(null==e)return{};var n,a,r=function(e,t){if(null==e)return{};var n,a,r={},l=Object.keys(e);for(a=0;a<l.length;a++)n=l[a],t.indexOf(n)>=0||(r[n]=e[n]);return r}(e,t);if(Object.getOwnPropertySymbols){var l=Object.getOwnPropertySymbols(e);for(a=0;a<l.length;a++)n=l[a],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}var i={id:"rn-listener",title:"رویداد نوتیفیکیشن"},o=[{value:"اضافه‌کردن کد لازم",id:"اضافهکردن-کد-لازم",children:[]}],u={rightToc:o},p="wrapper";function s(e){var t=e.components,n=b(e,["components"]);return Object(a.b)(p,c({},u,n,{components:t,mdxType:"MDXLayout"}),Object(a.b)("blockquote",null,Object(a.b)("p",{parentName:"blockquote"},"تمام نسخه‌ها")),Object(a.b)("p",null,"در صورتی که پیامی از پوشه به کاربر ارسال شود (نوتیفیکیشن و یا جیسون)، می‌توان از آنها باخبر شد.\nبرای اینکار می‌توانید رویدادی تعریف‌کنید و هنگام رخ‌دادن یکی از رویدادهای زیر کدهای خود را فراخوانی کنید."),Object(a.b)("ul",null,Object(a.b)("li",{parentName:"ul"},"دریافت نوتیفیکیشن"),Object(a.b)("li",{parentName:"ul"},"دریافت JSON (Custom content)"),Object(a.b)("li",{parentName:"ul"},"کاربر بر روی اعلان کلیک کند"),Object(a.b)("li",{parentName:"ul"},"کاربر اعلان را رد کند"),Object(a.b)("li",{parentName:"ul"},"کاربر بر روی دکمه‌ای از اعلان کلیک کند")),Object(a.b)("h2",{id:"اضافهکردن-کد-لازم"},"اضافه‌کردن کد لازم"),Object(a.b)("br",null),Object(a.b)("p",null,"برای دو حالت باز و بسته بودن برنامه، دو حالت مختلف برای افزودن رویداد وجود دارد که برای استفاده از هردو باید آن‌ها را به پروژه اضافه نمایید."),Object(a.b)(r.a,{defaultValue:"fore",values:[{label:"اپ باز باشد",value:"fore"},{label:"اپ بسته باشد",value:"back"}],mdxType:"Tabs"},Object(a.b)(l.a,{value:"fore",mdxType:"TabItem"},Object(a.b)("pre",null,Object(a.b)("code",c({parentName:"pre"},{className:"language-js"}),'import React, {useEffect} from "react";\nimport Pushe from "pushe-react-native";\n\nconst App = () => {\n    useEffect(() => {\n        Pushe.addEventListener(Pushe.EVENTS.RECEIVED, (notification) => {\n             // Notification was received\n        });\n\n        Pushe.addEventListener(Pushe.EVENTS.CLICKED, (notification) => {\n             // Notification was clicked\n        });\n\n        Pushe.addEventListener(Pushe.EVENTS.DISMISSED, (notification) => {\n             // Notification was dismissed\n        });\n\n        Pushe.addEventListener(Pushe.EVENTS.BUTTON_CLICKED, (notification) => {\n             // Notification button was clicked\n        });\n\n        Pushe.addEventListener(Pushe.EVENTS.CUSTOM_CONTENT_RECEIVED, (notification) => {\n             // Custom content was received\n        });\n    });\n    return (\n      // The jsx that would renders\n    );  \n}\n'))),Object(a.b)(l.a,{value:"back",mdxType:"TabItem"},"ابتدا باید در فایل به آدرس ‍‍android/app/src/main/java/[your-app-package-name]/MainApplication.java که می توانید در داخل پروژه اپلیکیشن تان در زیر شاخه android آن را پیدا کنید کد زیر را در متد onCreate قرار دهید:",Object(a.b)("pre",null,Object(a.b)("code",c({parentName:"pre"},{className:"language-js"}),"co.pushe.plus.RNPushe.initializeEventListeners(this);\n")),Object(a.b)("p",null,"در این حالت می‌توانید یک فایل مجزا مثلا ",Object(a.b)("inlineCode",{parentName:"p"},"notificationCallbacks.js")," در کدتان بسازید و در داخل فایل ",Object(a.b)("inlineCode",{parentName:"p"},"index.js"),"ی که در روت پروژه‌تان قرار دارد کد زیر را قرار دهید:"),Object(a.b)("pre",null,Object(a.b)("code",c({parentName:"pre"},{className:"language-js"}),"AppRegistry.registerHeadlessTask('PusheNotificationTask', () => require('./notificationCallbacks'));\n")),Object(a.b)("p",null,"سپس در داخلی فایلی که ساخته‌اید یعنی ",Object(a.b)("inlineCode",{parentName:"p"},"notificationCallbacks.js")," کد زیر را قرار دهید:"),Object(a.b)("pre",null,Object(a.b)("code",c({parentName:"pre"},{className:"language-js"}),"import Pushe from \"pushe-react-native\";\n\nmodule.exports = async (notificationData) => {          \n    if(notificationData['EVENT_TYPE'] === Pushe.EVENTS.RECEIVED) {\n       // Notification received\n    } else if (notificationData['EVENT_TYPE'] === Pushe.EVENTS.CLICKED) {\n       // Notification clicked\n    } else if (notificationData['EVENT_TYPE'] === Pushe.EVENTS.DISMISSED) {\n       // Notification dismissed\n    } else if (notificationData['EVENT_TYPE'] === Pushe.EVENTS.BUTTON_CLICKED) {\n       // Notification Button clicked\n    } else if (notificationData['EVENT_TYPE'] === Pushe.EVENTS.CUSTOM_CONTENT_RECEIVED) {\n       // Custom Content Received\n    }\n};\n")),Object(a.b)("p",null,"در داخلی module ی که export شده می توانید کد‌هایتان را قرار دهید و زمانی که اپلیکیشن در background باشد و اعلان دریافت شود این کد اجرا خواهد شد."),Object(a.b)("p",null,"دقت کنید که برای تست این حالت دوم یعنی زمانی که اپ در بک‌گراند می‌باشد باید از ابزار هایی نظیر logcat در اندروید استودیو و یا pidcat برای مشاهده لاگ و تست کردن استفاده کنید"))),Object(a.b)("hr",null),Object(a.b)("p",null,"حالت‌های مختلف رویداد در جدول زیر شرح‌ داده‌ شده‌است:"),Object(a.b)("table",null,Object(a.b)("thead",{parentName:"table"},Object(a.b)("tr",{parentName:"thead"},Object(a.b)("th",c({parentName:"tr"},{align:"center"}),"پارامتر ورودی"),Object(a.b)("th",c({parentName:"tr"},{align:null}),"استفاده"))),Object(a.b)("tbody",{parentName:"table"},Object(a.b)("tr",{parentName:"tbody"},Object(a.b)("td",c({parentName:"tr"},{align:"center"}),"Pushe.EVENTS.RECEIVED"),Object(a.b)("td",c({parentName:"tr"},{align:null}),"زمانی که نوتیفیکیشن دریافت شد این متد اجرا می‌شود.")),Object(a.b)("tr",{parentName:"tbody"},Object(a.b)("td",c({parentName:"tr"},{align:"center"}),"Pushe.EVENTS.CLICKED"),Object(a.b)("td",c({parentName:"tr"},{align:null}),"زمانی که کاربر روی نوتیفیکیشن کلیک کند، این متد اجرا می‌شود")),Object(a.b)("tr",{parentName:"tbody"},Object(a.b)("td",c({parentName:"tr"},{align:"center"}),"Pushe.EVENTS.DISMISSED"),Object(a.b)("td",c({parentName:"tr"},{align:null}),"زمان که کاربر نوتیفیکیشن را رد کند، این متد اجرا می‌شود")),Object(a.b)("tr",{parentName:"tbody"},Object(a.b)("td",c({parentName:"tr"},{align:"center"}),"Pushe.EVENTS.BUTTON_CLICKED"),Object(a.b)("td",c({parentName:"tr"},{align:null}),"زمانی که کاربر روی یک دکمه‌ی نوتیفیکیشن کلیک‌کند، این متد اجرا می‌شود")),Object(a.b)("tr",{parentName:"tbody"},Object(a.b)("td",c({parentName:"tr"},{align:"center"}),"Pushe.EVENTS.CUSTOM_CONTENT_RECEIVED"),Object(a.b)("td",c({parentName:"tr"},{align:null}),"زمانی که نوتیفیکیشن همراه با جیسون دلخواه و یا جیسون دلخواه‌، دریافت شود این متد اجرا می‌شود")))),Object(a.b)("hr",null),Object(a.b)("p",null,"آرگومان‌های ورودی نیز رشته‌هایی با فرمت زیر هستند:"),Object(a.b)("ul",null,Object(a.b)("li",{parentName:"ul"},Object(a.b)("inlineCode",{parentName:"li"},"Notification"),": این رشته اطلاعات نوتیفکیشن را در غالب یک جیسون دارد. از قبیل تیتر، متن.")),Object(a.b)("table",null,Object(a.b)("thead",{parentName:"table"},Object(a.b)("tr",{parentName:"thead"},Object(a.b)("th",c({parentName:"tr"},{align:"center"}),"فیلد"),Object(a.b)("th",c({parentName:"tr"},{align:null}),"توضیحات"))),Object(a.b)("tbody",{parentName:"table"},Object(a.b)("tr",{parentName:"tbody"},Object(a.b)("td",c({parentName:"tr"},{align:"center"}),"title"),Object(a.b)("td",c({parentName:"tr"},{align:null}),"تیتر نوتیفیکیشن")),Object(a.b)("tr",{parentName:"tbody"},Object(a.b)("td",c({parentName:"tr"},{align:"center"}),"content"),Object(a.b)("td",c({parentName:"tr"},{align:null}),"محتوای نوتیفیکیشن")),Object(a.b)("tr",{parentName:"tbody"},Object(a.b)("td",c({parentName:"tr"},{align:"center"}),"bigTitle"),Object(a.b)("td",c({parentName:"tr"},{align:null}),"تیتر بزرگ نوتیفیکیشن")),Object(a.b)("tr",{parentName:"tbody"},Object(a.b)("td",c({parentName:"tr"},{align:"center"}),"bigContent"),Object(a.b)("td",c({parentName:"tr"},{align:null}),"محتوای بزرگ نوتیفیکیشن")),Object(a.b)("tr",{parentName:"tbody"},Object(a.b)("td",c({parentName:"tr"},{align:"center"}),"summary"),Object(a.b)("td",c({parentName:"tr"},{align:null}),"متن خلاصه‌ی نوتیفکیشن")),Object(a.b)("tr",{parentName:"tbody"},Object(a.b)("td",c({parentName:"tr"},{align:"center"}),"imageUrl"),Object(a.b)("td",c({parentName:"tr"},{align:null}),"لینک عکس نوتیفیکیشن")),Object(a.b)("tr",{parentName:"tbody"},Object(a.b)("td",c({parentName:"tr"},{align:"center"}),"iconUrl"),Object(a.b)("td",c({parentName:"tr"},{align:null}),"لینک آیکون نوتیفیکیشن")),Object(a.b)("tr",{parentName:"tbody"},Object(a.b)("td",c({parentName:"tr"},{align:"center"}),"customContent"),Object(a.b)("td",c({parentName:"tr"},{align:null}),"جیسون دلخواه نوتیفیکیشن")),Object(a.b)("tr",{parentName:"tbody"},Object(a.b)("td",c({parentName:"tr"},{align:"center"}),"buttons"),Object(a.b)("td",c({parentName:"tr"},{align:null}),"لیست دکمه‌هایی که نوتیفیکیشن دارد")))),Object(a.b)("ul",null,Object(a.b)("li",{parentName:"ul"},Object(a.b)("inlineCode",{parentName:"li"},"Button"),": این رشته اطلاعات دکمه‌ي کلیک‌شده را در غالب جیسون‌دارد.")),Object(a.b)("table",null,Object(a.b)("thead",{parentName:"table"},Object(a.b)("tr",{parentName:"thead"},Object(a.b)("th",c({parentName:"tr"},{align:"center"}),"فیلد"),Object(a.b)("th",c({parentName:"tr"},{align:null}),"توضیحات"))),Object(a.b)("tbody",{parentName:"table"},Object(a.b)("tr",{parentName:"tbody"},Object(a.b)("td",c({parentName:"tr"},{align:"center"}),"id"),Object(a.b)("td",c({parentName:"tr"},{align:null}),"شناسه‌ای برای تشخیص دکمه")),Object(a.b)("tr",{parentName:"tbody"},Object(a.b)("td",c({parentName:"tr"},{align:"center"}),"text"),Object(a.b)("td",c({parentName:"tr"},{align:null}),"متن دکمه")))),Object(a.b)("ul",null,Object(a.b)("li",{parentName:"ul"},Object(a.b)("inlineCode",{parentName:"li"},"customContent"),": این رشته جیسونی است که توسعه‌دهنده هنگام ساخت و ارسال نوتیفیکیشن به آن ضمیمه می‌کند.")))}s.isMDXComponent=!0},297:function(e,t,n){"use strict";n.d(t,"a",(function(){return b})),n.d(t,"b",(function(){return p}));var a=n(0),r=n.n(a),l=r.a.createContext({}),c=function(e){var t=r.a.useContext(l),n=t;return e&&(n="function"==typeof e?e(t):Object.assign({},t,e)),n},b=function(e){var t=c(e.components);return r.a.createElement(l.Provider,{value:t},e.children)};var i="mdxType",o={inlineCode:"code",wrapper:function(e){var t=e.children;return r.a.createElement(r.a.Fragment,{},t)}},u=Object(a.forwardRef)((function(e,t){var n=e.components,a=e.mdxType,l=e.originalType,b=e.parentName,i=function(e,t){var n={};for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&-1===t.indexOf(a)&&(n[a]=e[a]);return n}(e,["components","mdxType","originalType","parentName"]),u=c(n),p=a,s=u[b+"."+p]||u[p]||o[p]||l;return n?r.a.createElement(s,Object.assign({},{ref:t},i,{components:n})):r.a.createElement(s,Object.assign({},{ref:t},i))}));function p(e,t){var n=arguments,a=t&&t.mdxType;if("string"==typeof e||a){var l=n.length,c=new Array(l);c[0]=u;var b={};for(var o in t)hasOwnProperty.call(t,o)&&(b[o]=t[o]);b.originalType=e,b[i]="string"==typeof e?e:a,c[1]=b;for(var p=2;p<l;p++)c[p]=n[p];return r.a.createElement.apply(null,c)}return r.a.createElement.apply(null,n)}u.displayName="MDXCreateElement"},298:function(e,t,n){var a;!function(){"use strict";var n={}.hasOwnProperty;function r(){for(var e=[],t=0;t<arguments.length;t++){var a=arguments[t];if(a){var l=typeof a;if("string"===l||"number"===l)e.push(a);else if(Array.isArray(a)&&a.length){var c=r.apply(null,a);c&&e.push(c)}else if("object"===l)for(var b in a)n.call(a,b)&&a[b]&&e.push(b)}}return e.join(" ")}e.exports?(r.default=r,e.exports=r):void 0===(a=function(){return r}.apply(t,[]))||(e.exports=a)}()},299:function(e,t,n){"use strict";var a=n(0),r=n.n(a),l=n(298),c=n.n(l);function b(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if(!(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e)))return;var n=[],a=!0,r=!1,l=void 0;try{for(var c,b=e[Symbol.iterator]();!(a=(c=b.next()).done)&&(n.push(c.value),!t||n.length!==t);a=!0);}catch(e){r=!0,l=e}finally{try{a||null==b.return||b.return()}finally{if(r)throw l}}return n}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}t.a=function(e){var t=e.block,n=e.children,l=e.defaultValue,i=e.values,o=b(Object(a.useState)(l),2),u=o[0],p=o[1];return r.a.createElement("div",null,r.a.createElement("ul",{className:c()("tabs",{"tabs--block":t})},i.map((function(e){var t=e.value,n=e.label;return r.a.createElement("li",{className:c()("tab-item",{"tab-item--active":u===t}),key:t,onClick:function(){return p(t)}},n)}))),r.a.createElement("div",{className:"margin-vert--md"},n.filter((function(e){return e.props.value===u}))[0]))}},300:function(e,t,n){"use strict";var a=n(0),r=n.n(a);t.a=function(e){return r.a.createElement("div",null,e.children)}}}]);