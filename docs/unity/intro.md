---
id: unity-intro
title: یونیتی
sidebar_label: راه‌اندازی سریع
---

> نسخه‌ی فعلی پلاگین فقط از سیستم‌عامل اندروید پشتیبانی می‌کند.

> نسخه‌ی یونیتی لازم 5.0 به بالاست.

## پیش‌نیاز‌ها

قبل از شروع کار موارد زیر را بررسی و از درستی آنها اطمینان حاصل نمایید.

- برای گذر از تحریم سرور‌های Jcenter از ابزار گذرازتحریم یا ... استفاده کنید.
- `MinSDKVersion` >= 14
- `TargetSDK` >= 25 (نسخه‌های پایین‌تر هم ممکن است کار کنند اما تضمینی نیست.)
- اپلیکیشن باید در کنسول ثبت‌شود. [راهنمایی](/docs/console/console-submit)
- توکن مانیفست از کنسول برداشته‌شود.
- دستگاه تست باید دارای گوگل‌پلی‌سرویس بوده و اینترنت آن فعال‌باشد.

## اضافه‌کردن پلاگین به پروژه

<br />

فایل پلاگین را از [این لینک](http://static.pushe.co/d/unity/Pushe1.6.3-unity1.2.unitypackage) دانلود کرده و یکی از روش‌های زیر به پروژه اضافه‌کنید:

* در حالی که پروژه‌ در یونیتی باز است روی پکیج‌ دابل‌کلیک کنید تا به یونیتی اضافه‌شود و در دیالوگ بازشده گزینه‌ی `import` را انتخاب کنید.
* روی فولدر `Assets` راست‌کلیک کنید و `import package -> Custom package` را انتخاب‌کرده و آدرس پلاگین را که دانلود کرده‌اید به آن بدهید.


## اضافه‌کردن محتوای مانیفست

> محل فایل‌مانیفست `Assets/plugin/Android/AndroidManifest.xml` می‌باشد. در صورتی که این فایل موجود نیست آن‌را از آدرس زیر به آدرس ذکر‌شده کپی کنید:
* `C:\Program Files\Unity\Editor\Data\PlaybackEngines\androidplayer\apk`

تگ مانیفست را از [کنسول پوشه](https://console.pushe.co) دریافت‌کنید و در فایل `AndroidManifest.xml` خود اضافه کنید. تگ دریافتی باید کدی همانند زیر باشد:


```xml
<meta-data android:name="co.ronash.pushe.token" android:value="{PUSHE_TOKEN}" />
```

به جای `{PUSHE_TOKEN}` باید توکن برنامه‌ی خود را قرار دهید.

و محل اضافه‌کردن آن در فایل `AndroidManifest` باید مطابق زیر باشد:

```xml
<manifest ...>
    <application ...>
        ...
        <!-- تگ باید در اینجا قرار گیرد -->
        <meta-data android:name="co.ronash.pushe.token" android:value="{PUSHE_TOKEN}" />
    </application>
</manifest>
```

برای استفاده از **امکان ارسال اعلان با استفاده‌از موقعیت مکانی** پرمیشن لوکیشن را نیز به مانیفست اضافه‌کنید:

```xml
<uses-permission android:name="android.permission.ACCESS_COARSE_LOCATION"/>
```

سپس در صورت Resolve نشدن Jar resolver آنرا `Force resolve` کنید:

<img src="/img/unity/force_resolve.png" /><br /><br />

> دقت کنید که در این مرحله نیاز به **فعال‌بودن ابزار گذر از تحریم** دارید.

در صورتی که پیغام **Resolution succeed** را مشاهده‌ نمودید و فایل‌های لازم پوشه به در کنار فایل مانیفست اضافه‌شدند،‌ بدین معنی‌ست که کدهای پوشه در پروژه قابل استفاده هستند.

## اضافه‌کردن کدهای لازم برای رجیستر

دو راه برای رجیسترکردن دستگاه در پوشه وجود دارد:
* اضافه‌کردن اسکریپت پوشه
* اضافه‌کردن کد پوشه به اسکریپت خود

### اضافه‌کردن اسکریپت پوشه

در مسیر `Assets > Pushe` فایلی به نام `Pushe.cs` را به `Hierarchy` پروژه‌ی خود (مثلا Main camera) اضافه‌کنید. بدین منظور فایل را به گیم‌آبجکت خود **Drag and drop** کنید.

### واردکردن کد رجیستر در اسکریپت خود

در صورتی که قصد دارید در اسکریپت خود عملیات رجیسترکردن پوشه را انجام‌دهید، کد زیر را به اسکریپت‌ خود اضافه‌کنید:


```cpp
// void Start() {

    Pushe.Pushe.Initialize();
// }
```

اگر در تابع بالا مقدار ورودی تابع `true` گذاشته شود و دستگاه کاربر شما گوگل پلی سرویس نداشته باشد و یا آن را غیرفعال کرده باشد دیالوگی باز می شود و به کاربر پیشنهاد نصب گوگل پلی سرویس داده می شود تا قابلیت دریافت و ارسال پوش نوتیفیکیشن فعال شود. اگر در تابع بالا `false` را قرار دهید، این دیالوگ برای کاربر باز نمی شود.
مقدار پیش‌فرض در صورت واردنکردن ورودی `true` می‌باشد.

## تست و ثبت دستگاه در پوشه

پس از اجرای برنامه در دستگاه (دارای گوگل‌پلی‌سرویس و متصل به اینترنت) پس از مدت کوتاهی انتظار بایستی نصب شما در پوشه ثبت ‌شود.
برای اطلاع از جزئیات و مشاهده‌ی خطاهای احتمالی می‌توانید از **لاگ‌کت** استفاده کنید.

### مشاهده‌ی جزئیات رجیستر در لاگ‌کت

> در اندروید استودیو لاگ‌کت از ابزار موجود است. در صورتی که از ابزار دیگری مانند VSCode استفاده‌ می‌کنید می‌توانید از هر روشی برای مشاهده‌ی لاگ استفاده کنید. [مستندات اندروید برای لاگ‌کت](https://developer.android.com/studio/command-line/logcat)

برای مشاهده‌ی بهتر لاگ‌ها می‌توانید فیلتر `Pushe` را روی لاگ‌ها اعمال کنید.

```bash
# Android logcat:

--------+ Started Initialization of Pushe 1.7 +--------
Trying to register to Pushe
Successfully registered to pushe
```

در صورتی که در یکی از این مراحل مشکلی وجود داشت، ابتدا [سوالات متداول](/docs/unity/unity-errors) را بررسی کنید و در صورتی نیافتن مشکل آن را در [Github issue](https://github.com/pusheco/unity-sample/issues?utf8=%E2%9C%93&q=is%3Aissue) مطرح کنید.

برای مشاهده‌ی امکانات و قابلیت‌های بیشتر پوشه در یونیتی به مطالعه‌ی ادامه‌ی مستندات بپردازید.