---
id: flutter-intro
title: راه‌اندازی در فلاتر
sidebar_label: راه‌اندازی سریع
---

> نسخه‌ی فعلی پلاگین فقط از سیستم‌عامل اندروید پشتیبانی می‌کند.

## پیش‌نیاز‌ها

قبل از شروع کار موارد زیر را بررسی و از درستی آنها اطمینان حاصل نمایید.

- برای گذر از تحریم سرور‌های Jcenter از ابزار گذرازتحریم یا ... استفاده کنید.
- `MinSDKVersion` >= 14
- `TargetSDK` >= 25 (نسخه‌های پایین‌تر هم ممکن است کار کنند اما تضمینی نیست.)
- اپلیکیشن باید در کنسول ثبت‌شود. [Pushe console](https://console.pushe.co)
- توکن مانیفست از کنسول برداشته‌شود.
- دستگاه تست باید دارای گوگل‌پلی‌سرویس بوده و اینترنت آن فعال‌باشد.

## اضافه‌کردن پلاگین به پروژه

به فایل `pubspec.yaml` پلاگین پوشه را اضافه‌کنید:


```yml
pushe: 1.0.1^
```

و محل قرارگیری آن در زیرمجموعه‌ی `dependencies` می‌باشد.

```yaml
dependencies:
    pushe: 1.0.1^
```

سپس سینک کنید یا دستور `flutter packages get` را در ترمینال وارد کنید تا پلاگین‌ها به پروژه اضافه‌شوند.

## اضافه‌کردن محتوای مانیفست

> محل فایل‌مانیفست `android/app/src/main/AndroidManifest.xml` می‌باشد.

تگ مانیفست را از [کنسول پوشه](https://console.pushe.co) دریافت‌کنید و در فایل `AndroidManifest.xml` خود اضافه کنید. تگ دریافتی باید کدی همانند زیر باشد:


```xml
<meta-data android:name="co.ronash.pushe.token" android:value="{PUSHE_TOKEN}" />
```

به جای `{PUSHE_TOKEN}` باید توکن برنامه‌ی خود را قرار دهید.

و محل اضافه‌کردن آن در فایل `AndroidManifest` باید مطابق زیر باشد:

```xml
<manifest ...>
    <application ...>
        ...
        <!-- تگ باید در اینجا قرار گیرد -->
        <meta-data android:name="co.ronash.pushe.token" android:value="{PUSHE_TOKEN}" />
    </application>
</manifest>
```

برای استفاده از **امکان ارسال اعلان با استفاده‌از موقعیت مکانی** پرمیشن لوکیشن را نیز به مانیفست اضافه‌کنید:

```xml
<uses-permission android:name="android.permission.ACCESS_COARSE_LOCATION"/>
```

## اضافه‌کردن کدهای لازم

فایل `main.dart`:

در بخش `import`ها کد زیر را اضافه‌کنید تا کلاس‌های پوشه در فایل قابل‌استفاده شوند:

```js
import 'package:pushe/pushe.dart';
```

و از کد زیر برای شروع‌ عملیات رجیسترکردن پوشه استفاده کنید:

```js
Pushe.initialize();
```

اگر در تابع بالا مقدار `showDialog: true` گذاشته شود و دستگاه کاربر شما گوگل پلی سرویس نداشته باشد و یا آن را غیرفعال کرده باشد دیالوگی باز می شود و به کاربر پیشنهاد نصب گوگل پلی سرویس داده می شود تا قابلیت دریافت و ارسال پوش نوتیفیکیشن فعال شود. اگر در تابع بالا `showDialog: false` را قرار دهید، این دیالوگ برای کاربر باز نمی شود.

## تست و ثبت دستگاه در پوشه

پس از اجرای برنامه و فراخوانی کد رجیستر پوشه، باید در **Android logcat** لاگ‌های زیر را ببینید (ممکن است به دلیل ارتباط با سرور این پروسه چند ثانیه طول بکشد):

> در اندروید استودیو لاگ‌کت از ابزار موجود است. در صورتی که از ابزار دیگری مانند VSCode استفاده‌ می‌کنید می‌توانید از هر روشی برای مشاهده‌ی لاگ استفاده کنید. [مستندات اندروید برای لاگ‌کت](https://developer.android.com/studio/command-line/logcat)

برای مشاهده‌ی بهتر لاگ‌ها می‌توانید فیلتر `Pushe` را روی لاگ‌ها اعمال کنید.

```js
// Android logcat:

--------+ Started Initialization of Pushe 1.6.3 +--------
Trying to register to Pushe
Successfully registered to pushe
```

در صورتی که در یکی از این مراحل مشکلی وجود داشت، ابتدا [سوالات متداول](/docs/flutter/flutter-errors) را بررسی کنید و در صورتی نیافتن مشکل آن را در [Github issue](https://github.com/pusheco/pushe-flutter/issues?utf8=%E2%9C%93&q=is%3Aissue) مطرح کنید.

برای مشاهده‌ی امکانات و قابلیت‌های بیشتر پوشه در فلاتر به مطالعه‌ی ادامه‌ی مستندات بپردازید.