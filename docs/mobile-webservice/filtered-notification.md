---
id: filtered-notification
title: وب‌سرویس موبایل پوشه
sidebar_label: ارسال اعلان فیلتردار
hide_title: true
description: راهنمای وب‌سرویس پوشه - ارسال اعلان فیلتردار
---

import FilteredNotification from "./codes/filtered-notification.mdx";

# ارسال اعلان فیلتردار به کاربر(های) اپلیکیشن

## تعریف اعلان فیلتردار

کاربرد این نوع اعلان ارسال محتوا (عنوان، متن، آیکن، عکس و ...) به **یک کاربر و یا به تعدادی از کاربرهای** اپلیکیشن با استفاده از شناسه یا فیلتر‌های اعلان می‌باشد.

تفاوت این نوع اعلان با اعلان ساده این است که در این نوع می‌توانید با مشخص کردن شناسه های تعدادی از کاربران و یا مشخص کردن فیتلرهایی خاص ، اعلان را فقط به تعدادی از کاربران اپلیکیشن ارسال کنید. (نه تمامی کاربران اپلیکیشن)

در این نوع می‌توانید توسط دو حالت زیر ، کاربرانی که اعلان را دریافت خواهند کرد را مشخص کنید.

- با استفاده از شناسه های یکتایی که توسط کتابخا‌نه‌های اندروید و آی‌او‌اس در اختیار شما قرار میگیره
- با استفاده از فیلترهای کلی که توسط پوشه در اختیار شما قرار می گیره مثل نوع اپراتور، استان و...

## تعریف شناسه‌های یکتا در ارسال اعلان

شناسه های یکتا مقادیری هستند که توسط اندروید و آی‌او‌اس ارائه می‌شوند و می‌توانید این مقادیر را از طریق کتابخانه‌های پوشه دریافت کنید.
با استفاده از این شناسه ها می‌توانید به کاربر(های) اپلیکیشن اعلان ارسال کنید.


- **شناسه یکتا device_id:**
    - **اندروید:**
        این شناسه توسط اندروید به کاربران اختصاص داده می‌شود و در واقع معادل Android Id می‌باشد. در گوشی‌های با سیستم عامل پایین‌تر از اندروید ۸، شناسه‌ی Android ID کاربر بین تمامی اپلیکیشن‌های نصب شده بر روی گوشی ثابت است و همچنین پس از حذف و نصب مجدد اپلیکیشن نیز ثابت می‌ماند. در نسخه‌ی اندروید ۸ به بالا، شناسه‌ی Android ID یک کاربر تنها برای اپلیکیشن‌هایی که با کلید‌های یکسان امضا شده باشند یکتا است و برای بقیه‌ی اپلیکیشن‌ها متفاوت است.            
    - **آی‌او‌اس:**
    شناسه‌ای است که توسط آی‌او‌اس به یک اپلیکیشن داده می‌شود و به ازای یک vendor یکتا می‌باشد.
    این شناسه متناظر با identifierForVendor در آی‌او‌اس می‌باشد. 


- **شناسه یکتا android_id:**
    - **اندروید:**
    متناظر با مقدار شناسه `device_id` است.
    - **آی‌او‌اس:**
    متناظر با مقدار شناسه `device_id` است.


- **شناسه یکتا google_ad_id:**
    - **اندروید:**
        این شناسه را Google Play Services به کاربران اختصاص می‌دهد و در واقع معادل همان Advertising ID می‌باشد. شناسه Advertising ID کاربر بین تمام اپلیکیشن‌های نصب شده بر روی گوشی او ثابت است ولی کاربر قادر است که این شناسه را reset و یا غیر فعال کند.    
    - **آی‌او‌اس:**
    شناسه‌ای است که توسط آی‌اواس داده می‌شود و در بین تمامی اپلیکیشن‌ها با vendor های متفاوت یکسان می‌باشد.
    کاربر می‌تواند استفاده از این شناسه را غیرفعال یا مقدار آن را ریست کند.
    این شناسه متناظر با advertisingIdentifier می‌باشد.

[برای مشاده روش دریافت هر یک از شناسه‌های معرفی شده، به راهنما پلتفرم مورد استفاده‌تان بروید](https://pushe.co/docs)

در زیر و در قالب `json` نحوه قرار دادن شناسه‌های یکتا در داخل کلید `filters` نمایش داده شده.

```
{
    "filters": {
        "device_id": ["list of device ids or android ids ..."],
        "android_id": ["list of device ids or android ids ..."],
        "google_ad_id": ["list of ad_ids ..."]
    }
}
```

> **نکته**: دو کلید یکتای `android_id` و `device_id` در وب سرویس پوشه مقادیر یکسانی رو دیافت می‌کنند.

> **نکته**: پوشه استفاده از کلید `android_id` را برای ارسال اعلان‌های فیلتردار توصیه می‌کند.

## تعریف فیلترهای ارسال اعلان

فیلترها کلید هایی هستند نظیر اپراتور، برند دستگاه، استان و ... که توسط پوشه در اختیار شما قرار گرفته و از آنها برای فیلتر کردن مخاطبان دریافت اعلان می‌توانید استفاده کنید.

- **فیلتر operator:**
    این کلید برای مشخص کردن نوع اپراتور می‌باشد    
    - **مقادیر:**
    `ir-mci‍‍`, `irancell`, `rightel`
- **فیلتر brand:**
    این کلید برای فیلتر کردن بر اساس انواع برند دستگاه می باشد    
    - **مقادیر:**
    `samsung`, `LGE`, `asus`, `htc`, `lenovo`, `sony`, `huawei`
- **فیلتر mobile_net:**
    این کلید بیانگر نوع اینترنت می‌باشد    
    - **مقادیر:**
    ‍`lte`, `wifi`
- **فیلتر state:**
    این فیلتر برای مشخص کردن استان می‌باشد    
    - **مقادیر:**
    `East Azerbaijan` , `Azarbayjan-e Gharbi` , `Ardabil` , `Isfahan` , `Alborz` , `Ilam` , `Bushehr` , `Tehran` , `Chahar Mahall va Bakhtiari`,
    `Khorasan-e Jonubi` , `Razavi Khorasan` , `Khorasan-e Shomali` , `Khuzestan` , `Zanjan` , `Semnan` , `Sistan and Baluchestan` , `Fars`, 
    `Qazvin` , `Qom` , `Kordestan` , `Kerman` , `Kermanshah` , `Kohgiluyeh va Buyer Ahmad` , `Golestan` , `Gilan` , `Lorestan` , `Mazandaran`, 
    `Markazi` , `Hormozgan` , `Hamadan` , `Yazd`

علاوه بر این هم می توانید از فیلتر **app_version** برای مشخص کردن مخاطبین اعلان استفاده کنید.

- **فیلتر app_version:**
    برای فیلتر کردن بر اساس ورژن اپلیکیشن‌تان    
    - **مقدار:**
    مقدار قابل قبول لیستی از ورژن‌های اپلیکیشن به شکل رشته string می باشد. برای مثال: `["1.0.1", "1.0.2"]`

در زیر و در قالب `json` نحوه قرار دادن فیلترهای ذکر شده در داخل کلید `filters` نمایش داده شده.

```
{
    "filters": {
        "operator": ["ir-mci‍‍", "irancell"],
        "brand": ["asus", "sony"],
        "mobile_net": ["wifi"],
        "state", ["list of states ..."],
        "app_version": ["1.0.0"]
    }
}
```

## آدرس (url) ارسال اعلان

برای ارسال اعلان فیلتردار می‌توانید از آدرس  زیر که برای ارسال اعلان به پلتفرم‌های آی‌او‌اس و اندروید می‌باشد استفاده کنید.
```https://api.pushe.co/v2/messaging/notifications/```

## نمونه کد ارسال اعلان فیلتردار

برای مشاهده تمامی کلید های قابل استفاده در ارسال اعلان به بخش [تمامی کلید های اعلان](/docs/mobile-webservice/notification-keys-list) مراجعه کنید.

<FilteredNotification />