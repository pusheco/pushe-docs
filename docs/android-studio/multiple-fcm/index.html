<!doctype html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width">
<meta name="generator" content="Docusaurus v2.0.0-alpha.54">


<title data-react-helmet="true">استفاده‌ی همزمان با FCM | پوشه</title>

<meta data-react-helmet="true" name="twitter:card" content="summary_large_image"><meta data-react-helmet="true" property="og:title" content="استفاده‌ی همزمان با FCM | پوشه"><meta data-react-helmet="true" name="description" content="پوشه برای دریافت اعلان از سرویس FCM(Firebase Cloud Messaging) گوگل استفاده می‌کند. در صورتی که پوشه تنها سرویسی در اپلیکیشن شما باشد که از این سرویس استفاده می‌کند، با دنبال کردن همان مراحلی که در قسمت راه‌اندازی توضیح داده شد همه چیز به درستی کار خواهد کرد و نیاز به انجام کار اضافه‌ای نیست. "><meta data-react-helmet="true" property="og:description" content="پوشه برای دریافت اعلان از سرویس FCM(Firebase Cloud Messaging) گوگل استفاده می‌کند. در صورتی که پوشه تنها سرویسی در اپلیکیشن شما باشد که از این سرویس استفاده می‌کند، با دنبال کردن همان مراحلی که در قسمت راه‌اندازی توضیح داده شد همه چیز به درستی کار خواهد کرد و نیاز به انجام کار اضافه‌ای نیست. "><meta data-react-helmet="true" property="og:url" content="https://docs.pushe.co/docs/android-studio/multiple-fcm">

<link data-react-helmet="true" rel="shortcut icon" href="/img/favicon.ico">


<link rel="stylesheet" href="/styles.ab52f940.css">


<link rel="preload" href="/styles.9ff22cb7.js" as="script">

<link rel="preload" href="/runtime~main.0e9a35ab.js" as="script">

<link rel="preload" href="/main.96aa680a.js" as="script">

<link rel="preload" href="/1.fc7b874b.js" as="script">

<link rel="preload" href="/2.b8ef795f.js" as="script">

<link rel="preload" href="/3.25707238.js" as="script">

<link rel="preload" href="/1be78505.8b540b69.js" as="script">

<link rel="preload" href="/20ac7829.7b5ac282.js" as="script">

<link rel="preload" href="/17896441.ad09d44a.js" as="script">

<link rel="preload" href="/05081cd2.a3acf0c0.js" as="script">

</head>
<body>
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=window.matchMedia("(prefers-color-scheme: dark)"),n=function(){var t=null;try{t=localStorage.getItem("theme")}catch(t){}return t}();null!==n?t(n):e.matches&&t("dark")}()</script>
<div id="__docusaurus">
<nav class="navbar navbar--light navbar--fixed-top"><div class="navbar__inner"><div class="navbar__items"><div aria-label="Navigation bar toggle" class="navbar__toggle" role="button" tabindex="0"><svg xmlns="http://www.w3.org/2000/svg" width="30" height="30" viewBox="0 0 30 30" role="img" focusable="false"><title>Menu</title><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></div><a class="navbar__brand" href="/"><img class="navbar__logo" src="/img/logo.svg" alt="پوشه "><strong class="navbar__title"> </strong></a><a aria-current="page" class="navbar__item navbar__link navbar__link--active" href="/">مستندات</a><a activeclassname="navbar__link--active" to="https://pushe.co" class="navbar__item navbar__link" href="https://pushe.co">وب‌سایت پوشه</a><a target="_blank" rel="noopener noreferrer" href="https://github.com/pusheco" class="navbar__item navbar__link">گیت‌هاب پوشه</a></div><div class="navbar__items navbar__items--right"><div class="react-toggle react-toggle--disabled displayOnlyInLargeViewport_1gtM"><div class="react-toggle-track"><div class="react-toggle-track-check"><span class="toggle_keGJ moon_1gwN"></span></div><div class="react-toggle-track-x"><span class="toggle_keGJ sun_3CPA"></span></div></div><div class="react-toggle-thumb"></div><input type="checkbox" disabled="" aria-label="Dark mode toggle" class="react-toggle-screenreader-only"></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div><div class="navbar-sidebar"><div class="navbar-sidebar__brand"><a class="navbar__brand" href="/"><img class="navbar__logo" src="/img/logo.svg" alt="پوشه "><strong class="navbar__title"> </strong></a></div><div class="navbar-sidebar__items"><div class="menu"><ul class="menu__list"><li class="menu__list-item"><a aria-current="page" class="menu__link navbar__link--active" position="left" href="/">مستندات</a></li><li class="menu__list-item"><a activeclassname="navbar__link--active" to="https://pushe.co" class="menu__link" position="left" href="https://pushe.co">وب‌سایت پوشه</a></li><li class="menu__list-item"><a target="_blank" rel="noopener noreferrer" href="https://github.com/pusheco" class="menu__link" position="left">گیت‌هاب پوشه</a></li></ul></div></div></div></nav><div class="main-wrapper"><div class="docPage_1kjD"><div class="docSidebarContainer_1cYp"><div class="sidebar_1kLs"><div class="menu menu--responsive menu_w2sC"><button aria-label="Open Menu" aria-haspopup="true" class="button button--secondary button--sm menu__button" type="button"><svg aria-label="Menu" class="sidebarMenuIcon_2vk4" xmlns="http://www.w3.org/2000/svg" height="24" width="24" viewBox="0 0 32 32" role="img" focusable="false"><title>Menu</title><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" href="#!">اندروید استودیو</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/docs/android-studio/intro">راه‌اندازی سریع</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/docs/android-studio/advanced-setup">راه‌اندازی پیشرفته</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/docs/android-studio/multidex">فعال‌کردن مالتی‌دکس</a></li></ul></li><li class="menu__list-item"><a class="menu__link" href="#!">قابلیت‌ها و امکانات</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/docs/android-studio/initialzation">بررسی آماده‌ به‌کار شدن کتابخانه</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/docs/android-studio/unification">تمایز کاربران با شناسه‌ها</a></li><li class="menu__list-item"><a class="menu__link" href="#!" tabindex="0">گروه بندی کاربران</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/docs/android-studio/topic">تاپیک</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/docs/android-studio/notification-channel">کانال نوتیفیکیشن</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/docs/android-studio/tag">برچسب (Tag)</a></li></ul></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/docs/android-studio/d2d-notification">اعلان از دیوایس به دیوایس دیگر</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/docs/android-studio/notification-listener">رویدادهای نوتیفیکیشن</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/docs/android-studio/disable-notification">غیرفعال‌کردن نمایش اعلان</a></li><li class="menu__list-item"><a class="menu__link" href="#!" tabindex="0">آنالیتیکس</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/docs/android-studio/events">رویدادها</a></li></ul></li><li class="menu__list-item"><a aria-current="page" class="menu__link menu__link--active" tabindex="0" href="/docs/android-studio/multiple-fcm">استفاده‌ی همزمان با FCM</a></li></ul></li><li class="menu__list-item"><a class="menu__link" href="#!">سوالات و مشکلات</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/docs/android-studio/troubleshoot">خطاهای ممکن</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/docs/android-studio/faq">سوالات</a></li></ul></li><li class="menu__list-item"><a class="menu__link" href="#!">تاریخچه نسخه های کتابخانه</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/docs/android-studio/releasenote">تغییرات نسخه ها</a></li></ul></li></ul></div></div></div><main class="docMainContainer_FFX1"><div class="container padding-vert--lg docItemWrapper_1cc7"><div class="row"><div class="col docItemCol_2GOA"><div class="docItemContainer_2cwg"><article><header><h1 class="docTitle_1vWb">استفاده‌ی همزمان با FCM</h1></header><div class="markdown"><p>پوشه برای دریافت اعلان از سرویس FCM(Firebase Cloud Messaging) گوگل استفاده می‌کند. در صورتی که پوشه تنها سرویسی در اپلیکیشن شما باشد که از این سرویس استفاده می‌کند، با دنبال کردن همان مراحلی که در قسمت راه‌اندازی توضیح داده شد همه چیز به درستی کار خواهد کرد و نیاز به انجام کار اضافه‌ای نیست.
ولی در مواردی که غیر از پوشه سرویس دیگری نیز بخواهد از
FCM
استفاده کند، مثلا اگر خود شما بخواهید مستقیما از
Firebase
استفاده کنید و پیغام‌های
FCM
را دریافت کنید، تداخل پیش خواهد آمد، چرا که در هر اپلیکیشن تنها یک سرویس گوش‌دهنده به پیغام‌های
FCM
می‌تواند وجود داشته باشد. اگر بیش از یک سرویس گوش‌دهنده تعریف شود، پیغام‌هایی که به اپلیکیشن می‌رسند به صورت تصادفی تنها به دست یکی از این سرویس‌ها خواهد رسید و این باعث مختل شدن کار برنامه می‌شود.</p><p>برای رفع این مشکل لازم است مراحل زیر را در راه اندازی طی کنید:</p><ol><li>سرویس گوش دهنده FCM پوشه را غیر فعال کنید</li><li>سرویس گوش دهنده FCM خود را فعال کنید</li><li>با دریافت پیغام‌های FCM و رخ دادن رویداد‌های مربوط به آن در سرویس خود، پوشه را مطلع کنید</li></ol><p>با طی کردن این مراحل، تنها گوش دهنده به پیغام‌های
FCM
گوش دهنده تعریف شده شما خواهد بود که همه‌ی پیغام‌های
FCM
را دریافت خواهد کرد و پیغام‌های مربوط به پوشه را به کتابخانه‌ی پوشه تحویل می‌دهد.</p><p> در ادامه نحوه اعمال این مراحل را قدم به قدم توضیح می‌دهیم:</p><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_ZqCz" id="غیر-فعال-کردن-سرویس-fcm-پوشه"></a><a aria-hidden="true" tabindex="-1" class="hash-link" href="#غیر-فعال-کردن-سرویس-fcm-پوشه" title="Direct link to heading">#</a>غیر فعال کردن سرویس FCM پوشه</h2><p>برای غیر فعال کردن سرویس
FCM
پوشه، عبارت زیر را در تگ
<code>&lt;application&gt;</code>
فایل منیفست خود بگذارید:</p><div class="mdxCodeBlock_iHAB"><div class="codeBlockContent_32p_"><button type="button" aria-label="Copy code to clipboard" class="copyButton_1BYj">Copy</button><div tabindex="0" class="prism-code language-xml codeBlock_19pQ"><div class="codeBlockLines_2n9r" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token tag punctuation" style="color:rgb(199, 146, 234)">&lt;</span><span class="token tag" style="color:rgb(255, 85, 114)">service</span><span class="token tag" style="color:rgb(255, 85, 114)"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token tag" style="color:rgb(255, 85, 114)">    </span><span class="token tag attr-name namespace" style="color:rgb(178, 204, 214)">android:</span><span class="token tag attr-name" style="color:rgb(255, 203, 107)">name</span><span class="token tag attr-value punctuation" style="color:rgb(199, 146, 234)">=</span><span class="token tag attr-value punctuation" style="color:rgb(199, 146, 234)">&quot;</span><span class="token tag attr-value" style="color:rgb(255, 85, 114)">co.pushe.plus.messaging.fcm.FcmService</span><span class="token tag attr-value punctuation" style="color:rgb(199, 146, 234)">&quot;</span><span class="token tag" style="color:rgb(255, 85, 114)"> </span></div><div class="token-line" style="color:#bfc7d5"><span class="token tag" style="color:rgb(255, 85, 114)">    </span><span class="token tag attr-name namespace" style="color:rgb(178, 204, 214)">tools:</span><span class="token tag attr-name" style="color:rgb(255, 203, 107)">node</span><span class="token tag attr-value punctuation" style="color:rgb(199, 146, 234)">=</span><span class="token tag attr-value punctuation" style="color:rgb(199, 146, 234)">&quot;</span><span class="token tag attr-value" style="color:rgb(255, 85, 114)">remove</span><span class="token tag attr-value punctuation" style="color:rgb(199, 146, 234)">&quot;</span><span class="token tag" style="color:rgb(255, 85, 114)"> </span><span class="token tag punctuation" style="color:rgb(199, 146, 234)">/&gt;</span></div></div></div></div></div><p>در صورتی که با پیغام خطا مواجه شدید بررسی کنید که عبارت
<code>xmlns:tools=&quot;http://schemas.android.com/tools&quot;</code>
در پارامتر‌های تگ
<code>&lt;manifest&gt;</code>
ابتدای فایل، وجود داشته باشد، به این شکل:</p><div class="mdxCodeBlock_iHAB"><div class="codeBlockContent_32p_"><button type="button" aria-label="Copy code to clipboard" class="copyButton_1BYj">Copy</button><div tabindex="0" class="prism-code language-xml codeBlock_19pQ"><div class="codeBlockLines_2n9r" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token tag punctuation" style="color:rgb(199, 146, 234)">&lt;</span><span class="token tag" style="color:rgb(255, 85, 114)">manifest</span><span class="token tag" style="color:rgb(255, 85, 114)"> </span><span class="token tag attr-name namespace" style="color:rgb(178, 204, 214)">xmlns:</span><span class="token tag attr-name" style="color:rgb(255, 203, 107)">android</span><span class="token tag attr-value punctuation" style="color:rgb(199, 146, 234)">=</span><span class="token tag attr-value punctuation" style="color:rgb(199, 146, 234)">&quot;</span><span class="token tag attr-value" style="color:rgb(255, 85, 114)">http://schemas.android.com/apk/res/android</span><span class="token tag attr-value punctuation" style="color:rgb(199, 146, 234)">&quot;</span><span class="token tag" style="color:rgb(255, 85, 114)"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token tag" style="color:rgb(255, 85, 114)">    </span><span class="token tag attr-name namespace" style="color:rgb(178, 204, 214)">xmlns:</span><span class="token tag attr-name" style="color:rgb(255, 203, 107)">tools</span><span class="token tag attr-value punctuation" style="color:rgb(199, 146, 234)">=</span><span class="token tag attr-value punctuation" style="color:rgb(199, 146, 234)">&quot;</span><span class="token tag attr-value" style="color:rgb(255, 85, 114)">http://schemas.android.com/tools</span><span class="token tag attr-value punctuation" style="color:rgb(199, 146, 234)">&quot;</span><span class="token tag" style="color:rgb(255, 85, 114)"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token tag" style="color:rgb(255, 85, 114)">    </span><span class="token tag attr-name" style="color:rgb(255, 203, 107)">package</span><span class="token tag attr-value punctuation" style="color:rgb(199, 146, 234)">=</span><span class="token tag attr-value punctuation" style="color:rgb(199, 146, 234)">&quot;</span><span class="token tag attr-value" style="color:rgb(255, 85, 114)">...</span><span class="token tag attr-value punctuation" style="color:rgb(199, 146, 234)">&quot;</span><span class="token tag punctuation" style="color:rgb(199, 146, 234)">/&gt;</span></div></div></div></div></div><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_ZqCz" id="ایجاد-سرویس-fcm-دلخواه-خود"></a><a aria-hidden="true" tabindex="-1" class="hash-link" href="#ایجاد-سرویس-fcm-دلخواه-خود" title="Direct link to heading">#</a>ایجاد سرویس FCM دلخواه خود</h2><p>در صورتی که از قبل سرویس
FCM
برای برنامه‌ی خود ایجاد کرده‌اید می‌توانید از این مرحله بگذرید.</p><p>یک کلاس جدید بسازید که از کلاس
<code>FirebaseMessagingService</code>
ارث می‌برد. در مثال زیر اسم کلاس را
<code>MyFcmService</code>
گذاشتیم ولی شما می‌توانید اسم دلخواه خود را استفاده کنید.</p><div class="mdxCodeBlock_iHAB"><div class="codeBlockContent_32p_"><button type="button" aria-label="Copy code to clipboard" class="copyButton_1BYj">Copy</button><div tabindex="0" class="prism-code language-java codeBlock_19pQ"><div class="codeBlockLines_2n9r" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">public class MyFcmService extends FirebaseMessagingService {</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">}</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></div></div></div></div></div><p>سرویس جدید را با گذاشتن عبارت زیر در تگ
<code>&lt;application&gt;</code>
فایل منیفست خود فعال کنید. توجه داشته باشید که نام کلاس را با نام کلاس تعریف شده خود جایگزین کنید.</p><div class="mdxCodeBlock_iHAB"><div class="codeBlockContent_32p_"><button type="button" aria-label="Copy code to clipboard" class="copyButton_1BYj">Copy</button><div tabindex="0" class="prism-code language-xml codeBlock_19pQ"><div class="codeBlockLines_2n9r" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token tag punctuation" style="color:rgb(199, 146, 234)">&lt;</span><span class="token tag" style="color:rgb(255, 85, 114)">service</span><span class="token tag" style="color:rgb(255, 85, 114)"> </span><span class="token tag attr-name namespace" style="color:rgb(178, 204, 214)">android:</span><span class="token tag attr-name" style="color:rgb(255, 203, 107)">name</span><span class="token tag attr-value punctuation" style="color:rgb(199, 146, 234)">=</span><span class="token tag attr-value punctuation" style="color:rgb(199, 146, 234)">&quot;</span><span class="token tag attr-value" style="color:rgb(255, 85, 114)">.MyFcmService</span><span class="token tag attr-value punctuation" style="color:rgb(199, 146, 234)">&quot;</span><span class="token tag punctuation" style="color:rgb(199, 146, 234)">&gt;</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token tag punctuation" style="color:rgb(199, 146, 234)">&lt;</span><span class="token tag" style="color:rgb(255, 85, 114)">intent-filter</span><span class="token tag punctuation" style="color:rgb(199, 146, 234)">&gt;</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">        </span><span class="token tag punctuation" style="color:rgb(199, 146, 234)">&lt;</span><span class="token tag" style="color:rgb(255, 85, 114)">action</span><span class="token tag" style="color:rgb(255, 85, 114)"> </span><span class="token tag attr-name namespace" style="color:rgb(178, 204, 214)">android:</span><span class="token tag attr-name" style="color:rgb(255, 203, 107)">name</span><span class="token tag attr-value punctuation" style="color:rgb(199, 146, 234)">=</span><span class="token tag attr-value punctuation" style="color:rgb(199, 146, 234)">&quot;</span><span class="token tag attr-value" style="color:rgb(255, 85, 114)">com.google.firebase.MESSAGING_EVENT</span><span class="token tag attr-value punctuation" style="color:rgb(199, 146, 234)">&quot;</span><span class="token tag" style="color:rgb(255, 85, 114)"> </span><span class="token tag punctuation" style="color:rgb(199, 146, 234)">/&gt;</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token tag punctuation" style="color:rgb(199, 146, 234)">&lt;/</span><span class="token tag" style="color:rgb(255, 85, 114)">intent-filter</span><span class="token tag punctuation" style="color:rgb(199, 146, 234)">&gt;</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token tag punctuation" style="color:rgb(199, 146, 234)">&lt;/</span><span class="token tag" style="color:rgb(255, 85, 114)">service</span><span class="token tag punctuation" style="color:rgb(199, 146, 234)">&gt;</span></div></div></div></div></div><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_ZqCz" id="رساندن-پیغامها-و-رویدادها-به-پوشه"></a><a aria-hidden="true" tabindex="-1" class="hash-link" href="#رساندن-پیغامها-و-رویدادها-به-پوشه" title="Direct link to heading">#</a>رساندن پیغام‌ها و رویداد‌ها به پوشه</h2><p>در کلاس تعریف شده در مرحله قبل، تابع‌های زیر را به همراه کد داخل آن‌ها پیاده‌سازی کنید:</p><div class="mdxCodeBlock_iHAB"><div class="codeBlockContent_32p_"><button type="button" aria-label="Copy code to clipboard" class="copyButton_1BYj">Copy</button><div tabindex="0" class="prism-code language-java codeBlock_19pQ"><div class="codeBlockLines_2n9r" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">public class MyFcmService extends FirebaseMessagingService {</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    @Override</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    public void onMessageReceived(RemoteMessage remoteMessage) {</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">        if (Pushe.getFcmHandler().onMessageReceived(remoteMessage)) {</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">            // Message is for Pushe</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">            return;</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">        }</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">        super.onMessageReceived(remoteMessage);</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">        // Handle Firebase message</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    }</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    @Override</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    public void onNewToken(String s) {</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">        Pushe.getFcmHandler().onNewToken(s);</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">        super.onNewToken(s);</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">        // Token is refreshed</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    }</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    @Override</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    public void onMessageSent(String s) {</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">        Pushe.getFcmHandler().onMessageSent(s);</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">        super.onMessageSent(s);</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">        // Message sent</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    }</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    @Override</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    public void onDeletedMessages() {</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">        Pushe.getFcmHandler().onDeletedMessages();</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">        super.onDeletedMessages();</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">        // Message was deleted</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    }</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    @Override</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    public void onSendError(String s, Exception e) {</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">        Pushe.getFcmHandler().onSendError(s, e);</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">        super.onSendError(s, e);</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">        // Error sent</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    }</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">}</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></div></div></div></div></div><p>هر بار که یک پیغام
FCM
به برنامه شما می‌رسد، تابع
<code>onMessageReceived</code>
کلاس شما صدا زده می‌شود. همانطور که در مثال بالا مشاهده می‌کنید در پیاده‌سازی این تابع، شما با استفاده از عبارت زیر پوشه را از دریافت پیغام مطلع می‌کنید:</p><div class="mdxCodeBlock_iHAB"><div class="codeBlockContent_32p_"><button type="button" aria-label="Copy code to clipboard" class="copyButton_1BYj">Copy</button><div tabindex="0" class="prism-code language-java codeBlock_19pQ"><div class="codeBlockLines_2n9r" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">Pushe.getFcmHandler().onMessageReceived(remoteMessage)</span></div></div></div></div></div><p>با این کار پیغام به دست پوشه نیز می‌رسد و اگر پیغام مربوط به کتابخانه‌ی پوشه باشد عملیات لازم بر روی آن انجام می‌شود. در صورتی که پیغام مربوط به پوشه باشد عبارت بالا مقدار
<code>true</code>
بر می‌گرداند و شما نیازی نیست عملیات بیشتری روی این پیغام انجام دهید. در صورتی که از عبارت بالا مقدار
<code>false</code>
گرفتید به این معنی است که پیغام مربوط به پوشه نیست و شما باید بسته به نیاز خود عملیات مورد نظر را برای آن انجام دهید.</p><p>سایر توابع کلاس تعریف شده، زمان رخ دادن رویداد‌های مختلف مربوط به
FCM
صدا زده می‌شوند. همانطور که در مثال بالا نشان داده شده، نیاز است که شما هنگام رخ دادن این رویدادها با صدا زدن تابع مربوطه از کتابخانه‌ی پوشه، پوشه را از رخ دادن این رویدادها مطلع کنید.</p></div></article><div class="margin-vert--lg"><nav class="pagination-nav"><div class="pagination-nav__item"><a class="pagination-nav__link" href="/docs/android-studio/events"><div class="pagination-nav__link--sublabel">Previous</div><div class="pagination-nav__link--label">« رویدادها</div></a></div><div class="pagination-nav__item pagination-nav__item--next"><a class="pagination-nav__link" href="/docs/android-studio/troubleshoot"><div class="pagination-nav__link--sublabel">Next</div><div class="pagination-nav__link--label">خطاهای ممکن »</div></a></div></nav></div></div></div><div class="col col--3"><div class="tableOfContents_TbNY"><ul class="contents contents__left-border"><li><a href="#غیر-فعال-کردن-سرویس-fcm-پوشه" class="contents__link">غیر فعال کردن سرویس FCM پوشه</a></li><li><a href="#ایجاد-سرویس-fcm-دلخواه-خود" class="contents__link">ایجاد سرویس FCM دلخواه خود</a></li><li><a href="#رساندن-پیغامها-و-رویدادها-به-پوشه" class="contents__link">رساندن پیغام‌ها و رویداد‌ها به پوشه</a></li></ul></div></div></div></div></main></div></div><footer class="footer"><div class="container"><div class="text--center"><div></div></div></div></footer>
</div>

<script src="/styles.9ff22cb7.js"></script>

<script src="/runtime~main.0e9a35ab.js"></script>

<script src="/main.96aa680a.js"></script>

<script src="/1.fc7b874b.js"></script>

<script src="/2.b8ef795f.js"></script>

<script src="/3.25707238.js"></script>

<script src="/1be78505.8b540b69.js"></script>

<script src="/20ac7829.7b5ac282.js"></script>

<script src="/17896441.ad09d44a.js"></script>

<script src="/05081cd2.a3acf0c0.js"></script>


</body>
</html>