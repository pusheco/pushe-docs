---
id: multidex
title: فعال‌کردن مالتی‌دکس
---

import Tabs from '@theme/Tabs';
import TabItem from '@theme/TabItem';

## MultiDex چیست؟

در صورتی که `minSdkVersion` پایینتر از ۲۱ باشد و پروژه را اجرا کنید ممکن است این خطا رخ‌دهد:

<img src="/img/common/multidex.jpeg" width="500" /><br/><br/>
 

در ماشین مجازی
Dalvik
تعداد متد‌ها در یک فایل
`.dex`
 بایستی از حد تعیین‌شده‌ی
**64K**
فراتر نروند. در غیراینصورت آدرس‌دهی برای
Dalvik
به درستی انجام‌نخواهدشد. به همین دلیل بایستی از چند فایل
`.dex`
استفاده‌کرد که اصطلاحا
**MultiDex**
نام‌گذاری‌شده‌است.

> **نکته‌ی مهم**:    
> در صورتی که `MinSDK >= 21` باشد این مشکل رخ نخواهد داد زیرا MultiDex در این حالت به صورت پیش‌فرض پشتیبانی می‌شود و نیاز به کار اضافه نیست.    
> در صورتی که برنامه این خطا را دارد، مشکل شما MultiDex نیست.

## فعال‌کردن MultiDex در برنامه

### اضافه‌کردن کد گریدل

‌در فایل `build.gradle(app:Module)` این موارد را اضافه کنید:

```js {4}
android {
    defaultConfig {
    // ...
        multiDexEnabled true
    }
}
```

<Tabs
  defaultValue="androidx"
  values={[
    { label: 'AndroidX', value: 'androidx', },
    { label: 'Android support', value: 'support', },
  ]}>

<TabItem value="androidx">

```js {2}
dependencies {
    implementation "androidx.multidex:multidex:2.0.1"
}
```

</TabItem>

<TabItem value="support">

```js {2}
dependencies {
    implementation 'com.android.support:multidex:1.0.3'
}
```

</TabItem>
</Tabs>

### Initialize کردن MultiDex

سه روش برای فعال‌کردن MultiDex در برنامه وجود دارد که با توجه به شرایط برنامه می‌توانید هر یک از این حالات را برای فعال‌کردن MultiDex استفاده کنید.

#### در برنامه کلاس Application کاستوم وجود ندارد

به اتریبیوت‌های تگ `application` در فایل `AndroidManifest.xml` این مورد را اضافه کنید:

<Tabs
  defaultValue="androidx"
  values={[
    { label: 'AndroidX', value: 'androidx', },
    { label: 'Android support', value: 'support', },
  ]}>

<TabItem value="androidx">

```xml {5}
<?xml version="1.0" encoding="utf-8"?>
<manifest xmlns:android="http://schemas.android.com/apk/res/android"
    package="com.example.myapp">
    <application
            android:name="androidx.multidex.MultiDexApplication" >
        ...
    </application>
</manifest>
```

</TabItem>

<TabItem value="support">

```xml {5}
<?xml version="1.0" encoding="utf-8"?>
<manifest xmlns:android="http://schemas.android.com/apk/res/android"
    package="com.example.myapp">
    <application
            android:name="android.support.multidex.MultiDexApplication" >
        ...
    </application>
</manifest>
```

</TabItem>
</Tabs>


#### کلاس Application کاستوم از android.app.Application ارث‌بری می‌کند

در این حالت کلاس پدر را از `android.app.Application` به `MultiDexApplication` تغییر دهید:

<Tabs
  defaultValue="kt"
  values={[
    { label: 'Kotlin', value: 'kt', },
    { label: 'Java', value: 'java', },
  ]}>

<TabItem value="kt">

```java
class MyApplication : MultiDexApplication() {...}
```

</TabItem>

<TabItem value="java">

```java
public class MyApplication extends MultiDexApplication { ... }
```

</TabItem>

</Tabs>

#### کلاس Application کاستوم از کلاس دیگری ارث می‌برد

 در این حالت می‌توانید `onAttachBaseContext` را override کنید و MultiDex را initialize کنید:

<Tabs
  defaultValue="kt"
  values={[
    { label: 'Kotlin', value: 'kt', },
    { label: 'Java', value: 'java', },
  ]}>

<TabItem value="kt">

```java
class MyApplication : SomeOtherApplication() {

    override fun attachBaseContext(base: Context) {
        super.attachBaseContext(base)
        MultiDex.install(this)
    }
}
```

</TabItem>
<TabItem value="java">

```java
public class MyApplication extends SomeOtherApplication {
  @Override
  protected void attachBaseContext(Context base) {
     super.attachBaseContext(base);
     MultiDex.install(this);
  }
}
```

</TabItem>
</Tabs>

> **برای اطلاعات بیشتر می‌توانید [داکیومنت اندروید در مورد MultiDex](https://developer.android.com/studio/build/multidex) را مطالعه نمایید.**



