<!DOCTYPE html>
<html lang="en" data-theme="">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width">
<script type="text/javascript">/*<![CDATA[*/window.__chunkMapping={"main":["/main.356f008fc4cb9796bfd5.css","/main.b5961fb714a8f0150402.js"],"component---site-src-pages-index-jsc-4-f-f99":["/component---site-src-pages-index-jsc-4-f-f99.c7474173508aaf40155a.css","/component---site-src-pages-index-jsc-4-f-f99.946b8ba4090d501461ff.js"],"component---theme-blog-post-pageccc-cab":["/component---theme-blog-post-pageccc-cab.42d18faa279882580cbb.css","/component---theme-blog-post-pageccc-cab.80fa90dc4ec8db4d0a9c.js"],"content---blog-welcome-286-e55":["/content---blog-welcome-286-e55.fdeb7a08723f36b9f8db.js"],"metadata---blog-welcome-83-a-211":["/metadata---blog-welcome-83-a-211.2e4bcdc6cbe98f88edd6.js"],"nextItem---blog-welcome-013-dc8":["/nextItem---blog-welcome-013-dc8.fd7aa56b266bb47eff74.js"],"content---blog-hello-worldd-61-086":["/content---blog-hello-worldd-61-086.08f83f46fdbe5feed95a.js"],"nextItem---blog-hello-world-0-e-4-6f2":["/nextItem---blog-hello-world-0-e-4-6f2.b31ba46f42590ab9a022.js"],"content---blog-holabdd-150":["/content---blog-holabdd-150.16a5db411483683576a4.js"],"component---theme-doc-page-1-be-9be":["/component---theme-doc-page-1-be-9be.a7dc664af81736e8f518.css","/component---theme-doc-page-1-be-9be.5365eed081863aea04fc.js"],"docsMetadata---docsbe-2-5ec":["/docsMetadata---docsbe-2-5ec.60f92b3422a28701bec4.js"],"component---theme-doc-item-178-a40":["/component---theme-doc-item-178-a40.de2648345892298aff25.css","/component---theme-doc-item-178-a40.baad5ab4d7a1d4824518.js"],"content---docs-docs-441-bcb":["/content---docs-docs-441-bcb.d64f81dd8a8e5334b345.js"],"metadata---docs-docsb-34-31d":["/metadata---docs-docsb-34-31d.1ed4f58900aaaeba9d55.js"],"content---docs-doc-1-b-2-f-e80":["/content---docs-doc-1-b-2-f-e80.c02fe2827457049b2721.js"],"metadata---docs-doc-1-b-29-b53":["/metadata---docs-doc-1-b-29-b53.f5753bfe5d02717d44a5.js"],"content---docs-doc-2-df-3-eaa":["/content---docs-doc-2-df-3-eaa.df2168e0f28ca946cc4c.js"],"metadata---docs-doc-29-dc-15a":["/metadata---docs-doc-29-dc-15a.5e3c9eed3f8685ac3541.js"],"content---docs-doc-3616-40c":["/content---docs-doc-3616-40c.ac6ac0928383cc7e0080.js"],"metadata---docs-doc-35-ed-b2c":["/metadata---docs-doc-35-ed-b2c.41e9078fcbee86e22917.js"],"content---docs-mdxce-3-7d1":["/content---docs-mdxce-3-7d1.d69a639ba519b0b1693a.js"],"metadata---docs-mdx-1-ed-f7b":["/metadata---docs-mdx-1-ed-f7b.4e5e98a1894c13f3579e.js"],"content---docs-android-studio-studio-advancedc-1-b-49c":["/content---docs-android-studio-studio-advancedc-1-b-49c.6b093732386eec404fc6.js"],"metadata---docs-android-studio-studio-advanceddc-5-6b8":["/metadata---docs-android-studio-studio-advanceddc-5-6b8.9019bdc24176a7ba9d7f.js"],"content---docs-android-studio-studio-channel-107-346":["/content---docs-android-studio-studio-channel-107-346.3b703c5e338f6f4f2c8f.js"],"metadata---docs-android-studio-studio-channel-9-e-3-9c3":["/metadata---docs-android-studio-studio-channel-9-e-3-9c3.b34ea2c23f4e800ff284.js"],"content---docs-android-studio-studio-d-2-d-1-ee-a13":["/content---docs-android-studio-studio-d-2-d-1-ee-a13.e9568489a2ca35239789.js"],"metadata---docs-android-studio-studio-d-2-dbf-9-ec2":["/metadata---docs-android-studio-studio-d-2-dbf-9-ec2.8ccb8e036b90e3c6709b.js"],"content---docs-android-studio-studio-disable-9-e-3-8ab":["/content---docs-android-studio-studio-disable-9-e-3-8ab.65bf616dc4f1516f20af.js"],"metadata---docs-android-studio-studio-disablec-08-570":["/metadata---docs-android-studio-studio-disablec-08-570.47df73c0774b6fef7abc.js"],"content---docs-android-studio-studio-faq-14-f-cfb":["/content---docs-android-studio-studio-faq-14-f-cfb.725fbdecf2020e784311.js"],"metadata---docs-android-studio-studio-faq-611-97b":["/metadata---docs-android-studio-studio-faq-611-97b.cdcf2ea002dbaaeb4449.js"],"content---docs-android-studio-studio-fcm-050-afd":["/content---docs-android-studio-studio-fcm-050-afd.f4d1f3d1c84ac304c8f5.js"],"metadata---docs-android-studio-studio-fcmdd-1-51f":["/metadata---docs-android-studio-studio-fcmdd-1-51f.d38f099a89b0f118c55d.js"],"content---docs-android-studio-studio-init-606-0e5":["/content---docs-android-studio-studio-init-606-0e5.dd65d6ffb2dfcc2a9110.js"],"metadata---docs-android-studio-studio-init-2-ba-af4":["/metadata---docs-android-studio-studio-init-2-ba-af4.31b7f3a43e14ccea4f3f.js"],"content---docs-android-studio-studio-introb-5-c-b91":["/content---docs-android-studio-studio-introb-5-c-b91.fb387485700b55826df2.js"],"metadata---docs-android-studio-studio-introdeb-2dd":["/metadata---docs-android-studio-studio-introdeb-2dd.733b607cf5ee65ca873c.js"],"content---docs-android-studio-studio-listener-68-f-78a":["/content---docs-android-studio-studio-listener-68-f-78a.59d2177f043603894647.js"],"metadata---docs-android-studio-studio-listener-371-f0d":["/metadata---docs-android-studio-studio-listener-371-f0d.d12db50f895ea3c8d26a.js"],"content---docs-android-studio-studio-pusheidcfe-108":["/content---docs-android-studio-studio-pusheidcfe-108.0cc53ad722fb201ff342.js"],"metadata---docs-android-studio-studio-pusheidf-71-d1c":["/metadata---docs-android-studio-studio-pusheidf-71-d1c.a2f6bae316cac955b00d.js"],"content---docs-android-studio-studio-topic-702-563":["/content---docs-android-studio-studio-topic-702-563.d520aa439f31652ee7c5.js"],"metadata---docs-android-studio-studio-topic-0-fd-f16":["/metadata---docs-android-studio-studio-topic-0-fd-f16.e9ec6e1bbf2255082112.js"],"content---docs-flutter-flutter-intro-812-dc6":["/content---docs-flutter-flutter-intro-812-dc6.7e387355c2b5b15b44fe.js"],"metadata---docs-flutter-flutter-intro-13-a-e8f":["/metadata---docs-flutter-flutter-intro-13-a-e8f.cd45e52267b2da955316.js"],"content---docs-flutter-pusheid-9-cf-642":["/content---docs-flutter-pusheid-9-cf-642.dc88f095e6b7440fb28c.js"],"metadata---docs-flutter-pusheid-729-06e":["/metadata---docs-flutter-pusheid-729-06e.bf6e6c1daef3bc8e640d.js"],"component---theme-blog-list-pagea-6-a-7ba":["/component---theme-blog-list-pagea-6-a-7ba.42d18faa279882580cbb.css","/component---theme-blog-list-pagea-6-a-7ba.a02c9a8dc64814fa3943.js"],"content---blogaf-1-856":["/content---blogaf-1-856.185c0dc5b8ee1a9b4b0b.js"],"content---blog-357-22b":["/content---blog-357-22b.ea62f4cbee8bf93be3bf.js"],"content---blog-8-e-9-35c":["/content---blog-8-e-9-35c.64d422c560bf9ae40fe7.js"],"metadata---blog-4-f-2-027":["/metadata---blog-4-f-2-027.a8afa631c6fd9206b717.js"],"component---theme-blog-tags-posts-page-687-b6c":["/component---theme-blog-tags-posts-page-687-b6c.42d18faa279882580cbb.css","/component---theme-blog-tags-posts-page-687-b6c.5f3703bc494badfad1f4.js"],"metadata---blog-tags-facebook-7-eb-a14":["/metadata---blog-tags-facebook-7-eb-a14.1feb7ee7b091b7257d49.js"],"metadata---blog-tags-hello-1-af-649":["/metadata---blog-tags-hello-1-af-649.3fb271173bb44e63c427.js"],"metadata---blog-tags-docusaurus-078-b62":["/metadata---blog-tags-docusaurus-078-b62.18b11ca2cd664ec7e60c.js"],"metadata---blog-tags-hola-9-f-5-9d3":["/metadata---blog-tags-hola-9-f-5-9d3.c0adf1cd94b39e5cdaa2.js"],"component---theme-blog-tags-list-page-01-a-d0b":["/component---theme-blog-tags-list-page-01-a-d0b.4b01e19a39e8c2d34899.js"],"tags---blog-tagsd-42-b52":["/tags---blog-tagsd-42-b52.5f4cb0a3de581426d365.js"]};/*]]>*/</script>

<title data-react-helmet="true">استفاده‌ی همزمان با FCM</title>

<meta data-react-helmet="true" charset="utf-8"/><meta data-react-helmet="true" http-equiv="x-ua-compatible" content="ie=edge"/><meta data-react-helmet="true" name="viewport" content="width=device-width"/><meta data-react-helmet="true" property="og:title" content="پوشه · مستندات پوشه (بتا)"/><meta data-react-helmet="true" name="twitter:card" content="summary"/><meta data-react-helmet="true" name="description" content="پوشه برای دریافت اعلان از سرویس FCM گوگل استفاده می‌کند. در صورتی که پوشه تنها سرویسی در اپلیکیشن شما باشد که از این سرویس استفاده می‌کند، با دنبال کردن همان مراحلی که در قسمت راه‌اندازی توضیح داده شد همه چیز به درستی کار خواهد کرد و نیازی به انجام کار اضافه‌ای برای راه‌ اندازی FCM نیست. "/><meta data-react-helmet="true" property="og:description" content="پوشه برای دریافت اعلان از سرویس FCM گوگل استفاده می‌کند. در صورتی که پوشه تنها سرویسی در اپلیکیشن شما باشد که از این سرویس استفاده می‌کند، با دنبال کردن همان مراحلی که در قسمت راه‌اندازی توضیح داده شد همه چیز به درستی کار خواهد کرد و نیازی به انجام کار اضافه‌ای برای راه‌ اندازی FCM نیست. "/><meta data-react-helmet="true" property="og:url" content="https://pusheco.github.io//docs/android-studio/studio-fcm"/>

<link data-react-helmet="true" rel="shortcut icon" href="/img/pushe_logo.jpeg"/>


<link rel="stylesheet" type="text/css" href="/main.356f008fc4cb9796bfd5.css" />

<link rel="stylesheet" type="text/css" href="/0.3bfe0c00301494d2e2b7.css" />

<link rel="stylesheet" type="text/css" href="/1.c1a127e4736922edeb2a.css" />

<link rel="stylesheet" type="text/css" href="/component---theme-doc-page-1-be-9be.a7dc664af81736e8f518.css" />

<link rel="stylesheet" type="text/css" href="/component---theme-doc-item-178-a40.de2648345892298aff25.css" />

</head>
<body >
<div id="__docusaurus">
<nav class="navbar navbar--light navbar--fixed-top"><div class="navbar__inner"><div class="navbar__items"><div aria-label="Navigation bar toggle" class="navbar__toggle" role="button" tabindex="0"><svg xmlns="http://www.w3.org/2000/svg" width="30" height="30" viewBox="0 0 30 30" role="img" focusable="false"><title>Menu</title><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></div><a aria-current="page" class="navbar__brand active" href="/"><img class="navbar__logo" src="/img/pushe_logo.jpeg" alt="پوشه "/><strong class="">پوشه </strong></a><a class="navbar__item navbar__link" label="مستندات" position="left" href="/docs/docs">مستندات</a><a class="navbar__item navbar__link" to="https://pushe.co" label="وب‌سایت" position="left" activeClassName="navbar__link--active" href="https://pushe.co">وب‌سایت</a></div><div class="navbar__items navbar__items--right"><a class="navbar__item navbar__link" href="https://github.com/pusheco" label="GitHub" position="right" target="_blank" rel="noopener noreferrer">GitHub</a><div class="react-toggle displayOnlyInLargeViewport_1gtM"><div class="react-toggle-track"><div class="react-toggle-track-check"><span class="toggle_16vC moon_1N64"></span></div><div class="react-toggle-track-x"><span class="toggle_16vC sun_3CZP"></span></div></div><div class="react-toggle-thumb"></div><input type="checkbox" aria-label="Dark mode toggle" class="react-toggle-screenreader-only"/></div></div></div><div role="presentation" class="navbar__sidebar__backdrop"></div><div class="navbar__sidebar"><div class="navbar__sidebar__brand"><a aria-current="page" class="navbar__brand active" href="/"><img class="navbar__logo" src="/img/pushe_logo.jpeg" alt="پوشه "/><strong>پوشه </strong></a></div><div class="navbar__sidebar__items"><div class="menu"><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" label="مستندات" position="left" href="/docs/docs">مستندات</a></li><li class="menu__list-item"><a class="menu__link" to="https://pushe.co" label="وب‌سایت" position="left" activeClassName="navbar__link--active" href="https://pushe.co">وب‌سایت</a></li><li class="menu__list-item"><a class="menu__link" href="https://github.com/pusheco" label="GitHub" position="right" target="_blank" rel="noopener noreferrer">GitHub</a></li></ul></div></div></div></nav><div class="docPage_1kjD"><div class="docSidebarContainer_1cYp"><div class="sidebar_1kLs"><div class="menu menu--responsive"><button aria-label="Open Menu" class="button button--secondary button--sm menu__button" type="button"><svg class="sidebarMenuIcon_2vk4" xmlns="http://www.w3.org/2000/svg" height="24" width="24" viewBox="0 0 32 32" role="img" focusable="false"><title>Menu</title><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><ul class="menu__list"><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!">Android studio</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" href="/docs/android-studio/studio-intro">راه‌اندازی سریع</a></li><li class="menu__list-item"><a class="menu__link" href="/docs/android-studio/studio-advanced">امکانات دیگر</a></li></ul></li><li class="menu__list-item"><a class="menu__link menu__link--sublist menu__link--active" href="#!">قابلیت‌ها</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" href="/docs/android-studio/studio-init">رجیستر‌کردن</a></li><li class="menu__list-item"><a class="menu__link" href="/docs/android-studio/studio-pusheid">شناسایی کاربر</a></li><li class="menu__list-item"><a class="menu__link" href="/docs/android-studio/studio-topic">گروه‌بندی با تاپیک</a></li><li class="menu__list-item"><a class="menu__link" href="/docs/android-studio/studio-d2d">اعلان از یک دیوایس یه دیوایس دیگر</a></li><li class="menu__list-item"><a class="menu__link" href="/docs/android-studio/studio-listener">رویدادهای نوتیفیکیشن</a></li><li class="menu__list-item"><a class="menu__link" href="/docs/android-studio/studio-disable">غیرفعال‌کردن نمایش اعلان</a></li><li class="menu__list-item"><a class="menu__link" href="/docs/android-studio/studio-channel">کانال نوتیفیکیشن</a></li><li class="menu__list-item"><a aria-current="page" class="menu__link menu__link--active" href="/docs/android-studio/studio-fcm">استفاده‌ی همزمان با FCM</a></li></ul></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!">سوالات و مشکلات</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" href="/docs/android-studio/studio-faq">FAQ</a></li></ul></li></ul></div></div></div><main class="docMainContainer_FFX1"><div><div class="padding-vert--lg"><div class="container"><div class="row"><div class="col"><div class="docItemContainer_2cwg"><header><h1 class="docTitle_1vWb">استفاده‌ی همزمان با FCM</h1></header><article><div class="markdown"><p>پوشه برای دریافت اعلان از سرویس FCM گوگل استفاده می‌کند. در صورتی که پوشه تنها سرویسی در اپلیکیشن شما باشد که از این سرویس استفاده می‌کند، با دنبال کردن همان مراحلی که در قسمت راه‌اندازی توضیح داده شد همه چیز به درستی کار خواهد کرد و نیازی به انجام کار اضافه‌ای برای راه‌ اندازی FCM نیست.
ولی در مواردی که غیر از پوشه سرویس دیگری نیز بخواهد از
FCM
استفاده کند، مثلا اگر خود شما بخواهید مستقیما از
Firebase
استفاده کنید و پیغام‌های
FCM
دریافت کنید، تداخل پیش خواهد آمد چرا که در هر اپلیکیشن تنها یک سرویس گوش‌دهنده به پیغام‌های
FCM
می‌تواند وجود داشته باشد. اگر بیش از یک سرویس گوش‌دهنده تعریف شود، پیغام‌هایی که به اپلیکیشن می‌رسند به صورت تصادفی تنها به دست یکی از این سرویس‌ها خواهد رسید و این باعث مختل شدن عملیات برنامه می‌شود.</p><p>برای رفع این مشکل لازم است مراحل زیر را در راه اندازی طی کنید:</p><ol><li>سرویس گوش دهنده FCM پوشه را غیر فعال کنید</li><li>سرویس گوش دهنده FCM خود را فعال کنید</li><li>با دریافت پیغام‌های FCM و رخ دادن رویداد‌های مربوط به آن در سرویس خود، پوشه را مطلع کنید</li></ol><p>با طی کردن این مراحل، تنها گوش دهنده به پیغام‌های
FCM
گوش دهنده تعریف شده شما خواهد بود که همه‌ی پیغام‌های
FCM
را دریافت خواهد کرد و پیغام‌های مربوط به پوشه را به کتابخانه‌ی پوشه تحویل می‌دهد.</p><p> در ادامه نحوه اعمال این مراحل را قدم به فدم توضیح می‌دهیم:</p><h2><a aria-hidden="true" class="anchor" id="غیر-فعال-کردن-سرویس-fcm-پوشه"></a><a aria-hidden="true" class="hash-link" href="#غیر-فعال-کردن-سرویس-fcm-پوشه">#</a>غیر فعال کردن سرویس FCM پوشه</h2><p>برای غیر فعال کردن سرویس
FCM
پوشه، عبارت زیر را در تگ
<code>&lt;application&gt;</code>
فایل منیفست خود بگذارید:</p><pre class="mdxCodeBlock_iHAB"><div class="codeBlockWrapper_2QGZ"><pre class="prism-code language-xml codeBlock_19pQ" style="color:#9CDCFE;background-color:#1E1E1E"><div class="token-line" style="color:#9CDCFE"><span class="token tag punctuation" style="color:rgb(212, 212, 212)">&lt;</span><span class="token tag" style="color:rgb(78, 201, 176)">service</span><span class="token tag" style="color:rgb(78, 201, 176)"></span></div><div class="token-line" style="color:#9CDCFE"><span class="token tag" style="color:rgb(78, 201, 176)">    </span><span class="token tag attr-name namespace" style="color:rgb(156, 220, 254)">android:</span><span class="token tag attr-name" style="color:rgb(156, 220, 254)">name</span><span class="token tag attr-value punctuation" style="color:rgb(212, 212, 212)">=</span><span class="token tag attr-value punctuation" style="color:rgb(212, 212, 212)">&quot;</span><span class="token tag attr-value" style="color:rgb(206, 145, 120)">co.ronash.pushe.fcm.FcmService</span><span class="token tag attr-value punctuation" style="color:rgb(212, 212, 212)">&quot;</span><span class="token tag" style="color:rgb(78, 201, 176)"> </span></div><div class="token-line" style="color:#9CDCFE"><span class="token tag" style="color:rgb(78, 201, 176)">    </span><span class="token tag attr-name namespace" style="color:rgb(156, 220, 254)">tools:</span><span class="token tag attr-name" style="color:rgb(156, 220, 254)">node</span><span class="token tag attr-value punctuation" style="color:rgb(212, 212, 212)">=</span><span class="token tag attr-value punctuation" style="color:rgb(212, 212, 212)">&quot;</span><span class="token tag attr-value" style="color:rgb(206, 145, 120)">remove</span><span class="token tag attr-value punctuation" style="color:rgb(212, 212, 212)">&quot;</span><span class="token tag" style="color:rgb(78, 201, 176)"> </span><span class="token tag punctuation" style="color:rgb(212, 212, 212)">/&gt;</span></div></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_1BYj">Copy</button></div></pre><p>در صورتی که با پیغام خطا مواجه شدید بررسی کنید که عبارت
<code>xmlns:tools=&quot;http://schemas.android.com/tools&quot;</code>
در پارامتر‌های تگ
<code>&lt;manifest&gt;</code>
ابتدای فایل وجود داشته باشد، به این شکل:</p><pre class="mdxCodeBlock_iHAB"><div class="codeBlockWrapper_2QGZ"><pre class="prism-code language-xml codeBlock_19pQ" style="color:#9CDCFE;background-color:#1E1E1E"><div class="token-line" style="color:#9CDCFE"><span class="token tag punctuation" style="color:rgb(212, 212, 212)">&lt;</span><span class="token tag" style="color:rgb(78, 201, 176)">manifest</span><span class="token tag" style="color:rgb(78, 201, 176)"> </span><span class="token tag attr-name namespace" style="color:rgb(156, 220, 254)">xmlns:</span><span class="token tag attr-name" style="color:rgb(156, 220, 254)">android</span><span class="token tag attr-value punctuation" style="color:rgb(212, 212, 212)">=</span><span class="token tag attr-value punctuation" style="color:rgb(212, 212, 212)">&quot;</span><span class="token tag attr-value" style="color:rgb(206, 145, 120)">http://schemas.android.com/apk/res/android</span><span class="token tag attr-value punctuation" style="color:rgb(212, 212, 212)">&quot;</span><span class="token tag" style="color:rgb(78, 201, 176)"></span></div><div class="token-line" style="color:#9CDCFE"><span class="token tag" style="color:rgb(78, 201, 176)">    </span><span class="token tag attr-name namespace" style="color:rgb(156, 220, 254)">xmlns:</span><span class="token tag attr-name" style="color:rgb(156, 220, 254)">tools</span><span class="token tag attr-value punctuation" style="color:rgb(212, 212, 212)">=</span><span class="token tag attr-value punctuation" style="color:rgb(212, 212, 212)">&quot;</span><span class="token tag attr-value" style="color:rgb(206, 145, 120)">http://schemas.android.com/tools</span><span class="token tag attr-value punctuation" style="color:rgb(212, 212, 212)">&quot;</span><span class="token tag" style="color:rgb(78, 201, 176)"></span></div><div class="token-line" style="color:#9CDCFE"><span class="token tag" style="color:rgb(78, 201, 176)">    </span><span class="token tag attr-name" style="color:rgb(156, 220, 254)">package</span><span class="token tag attr-value punctuation" style="color:rgb(212, 212, 212)">=</span><span class="token tag attr-value punctuation" style="color:rgb(212, 212, 212)">&quot;</span><span class="token tag attr-value" style="color:rgb(206, 145, 120)">...</span><span class="token tag attr-value punctuation" style="color:rgb(212, 212, 212)">&quot;</span><span class="token tag punctuation" style="color:rgb(212, 212, 212)">/&gt;</span></div></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_1BYj">Copy</button></div></pre><h2><a aria-hidden="true" class="anchor" id="ایجاد-سرویس-fcm-برنامه"></a><a aria-hidden="true" class="hash-link" href="#ایجاد-سرویس-fcm-برنامه">#</a>ایجاد سرویس FCM برنامه</h2><p>در صورتی که از قبل سرویس
FCM
برای برنامه‌ی خود ایجاد کرده‌اید می‌توانید از این مرحله بگذرید.</p><p>یک کلاس جدید بسازید که از کلاس
<code>FirebaseMessagingService</code>
ارث می‌برد. در مثال زیر اسم کلاس را
<code>MyFcmService</code>
گذاشتیم ولی شما می‌توانید اسم دلخواه خود را استفاده کنید.</p><pre class="mdxCodeBlock_iHAB"><div class="codeBlockWrapper_2QGZ"><pre class="prism-code language-java codeBlock_19pQ" style="color:#9CDCFE;background-color:#1E1E1E"><div class="token-line" style="color:#9CDCFE"><span class="token keyword" style="color:rgb(86, 156, 214)">public</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(86, 156, 214)">class</span><span class="token plain"> </span><span class="token class-name" style="color:rgb(78, 201, 176)">MyFcmService</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(86, 156, 214)">extends</span><span class="token plain"> </span><span class="token class-name" style="color:rgb(78, 201, 176)">FirebaseMessagingService</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(212, 212, 212)">{</span><span class="token plain"></span></div><div class="token-line" style="color:#9CDCFE"><span class="token plain" style="display:inline-block"></span></div><div class="token-line" style="color:#9CDCFE"><span class="token plain"></span><span class="token punctuation" style="color:rgb(212, 212, 212)">}</span></div></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_1BYj">Copy</button></div></pre><p>سرویس جدید را با گذاشتن عبارت زیر در تگ
<code>&lt;application&gt;</code>
فایل منیفست خود فعال کنید. توجه داشته باشید که نام کلاس را با نام کلاس تعریف شده خود جایگزین کنید.</p><pre class="mdxCodeBlock_iHAB"><div class="codeBlockWrapper_2QGZ"><pre class="prism-code language-xml codeBlock_19pQ" style="color:#9CDCFE;background-color:#1E1E1E"><div class="token-line" style="color:#9CDCFE"><span class="token tag punctuation" style="color:rgb(212, 212, 212)">&lt;</span><span class="token tag" style="color:rgb(78, 201, 176)">service</span><span class="token tag" style="color:rgb(78, 201, 176)"> </span><span class="token tag attr-name namespace" style="color:rgb(156, 220, 254)">android:</span><span class="token tag attr-name" style="color:rgb(156, 220, 254)">name</span><span class="token tag attr-value punctuation" style="color:rgb(212, 212, 212)">=</span><span class="token tag attr-value punctuation" style="color:rgb(212, 212, 212)">&quot;</span><span class="token tag attr-value" style="color:rgb(206, 145, 120)">.MyFcmService</span><span class="token tag attr-value punctuation" style="color:rgb(212, 212, 212)">&quot;</span><span class="token tag punctuation" style="color:rgb(212, 212, 212)">&gt;</span><span class="token plain"></span></div><div class="token-line" style="color:#9CDCFE"><span class="token plain">    </span><span class="token tag punctuation" style="color:rgb(212, 212, 212)">&lt;</span><span class="token tag" style="color:rgb(78, 201, 176)">intent-filter</span><span class="token tag punctuation" style="color:rgb(212, 212, 212)">&gt;</span><span class="token plain"></span></div><div class="token-line" style="color:#9CDCFE"><span class="token plain">        </span><span class="token tag punctuation" style="color:rgb(212, 212, 212)">&lt;</span><span class="token tag" style="color:rgb(78, 201, 176)">action</span><span class="token tag" style="color:rgb(78, 201, 176)"> </span><span class="token tag attr-name namespace" style="color:rgb(156, 220, 254)">android:</span><span class="token tag attr-name" style="color:rgb(156, 220, 254)">name</span><span class="token tag attr-value punctuation" style="color:rgb(212, 212, 212)">=</span><span class="token tag attr-value punctuation" style="color:rgb(212, 212, 212)">&quot;</span><span class="token tag attr-value" style="color:rgb(206, 145, 120)">com.google.firebase.MESSAGING_EVENT</span><span class="token tag attr-value punctuation" style="color:rgb(212, 212, 212)">&quot;</span><span class="token tag" style="color:rgb(78, 201, 176)"> </span><span class="token tag punctuation" style="color:rgb(212, 212, 212)">/&gt;</span><span class="token plain"></span></div><div class="token-line" style="color:#9CDCFE"><span class="token plain">    </span><span class="token tag punctuation" style="color:rgb(212, 212, 212)">&lt;/</span><span class="token tag" style="color:rgb(78, 201, 176)">intent-filter</span><span class="token tag punctuation" style="color:rgb(212, 212, 212)">&gt;</span><span class="token plain"></span></div><div class="token-line" style="color:#9CDCFE"><span class="token plain"></span><span class="token tag punctuation" style="color:rgb(212, 212, 212)">&lt;/</span><span class="token tag" style="color:rgb(78, 201, 176)">service</span><span class="token tag punctuation" style="color:rgb(212, 212, 212)">&gt;</span></div></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_1BYj">Copy</button></div></pre><h2><a aria-hidden="true" class="anchor" id="رساندن-پیغامها-و-رویدادها-به-پوشه"></a><a aria-hidden="true" class="hash-link" href="#رساندن-پیغامها-و-رویدادها-به-پوشه">#</a>رساندن پیغام‌ها و رویداد‌ها به پوشه</h2><p>در کلاس تعریف شده در مرحله قبل، تابع‌های زیر را به همراه کد داخل آن‌ها پیاده‌سازی کنید:</p><pre class="mdxCodeBlock_iHAB"><div class="codeBlockWrapper_2QGZ"><pre class="prism-code language-java codeBlock_19pQ" style="color:#9CDCFE;background-color:#1E1E1E"><div class="token-line" style="color:#9CDCFE"><span class="token keyword" style="color:rgb(86, 156, 214)">public</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(86, 156, 214)">class</span><span class="token plain"> </span><span class="token class-name" style="color:rgb(78, 201, 176)">MyFcmService</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(86, 156, 214)">extends</span><span class="token plain"> </span><span class="token class-name" style="color:rgb(78, 201, 176)">FirebaseMessagingService</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(212, 212, 212)">{</span><span class="token plain"></span></div><div class="token-line" style="color:#9CDCFE"><span class="token plain">    </span><span class="token annotation punctuation" style="color:rgb(212, 212, 212)">@Override</span><span class="token plain"></span></div><div class="token-line" style="color:#9CDCFE"><span class="token plain">    </span><span class="token keyword" style="color:rgb(86, 156, 214)">public</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(86, 156, 214)">void</span><span class="token plain"> </span><span class="token function" style="color:rgb(220, 220, 170)">onMessageReceived</span><span class="token punctuation" style="color:rgb(212, 212, 212)">(</span><span class="token class-name" style="color:rgb(78, 201, 176)">RemoteMessage</span><span class="token plain"> remoteMessage</span><span class="token punctuation" style="color:rgb(212, 212, 212)">)</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(212, 212, 212)">{</span><span class="token plain"></span></div><div class="token-line" style="color:#9CDCFE"><span class="token plain">        </span><span class="token keyword" style="color:rgb(86, 156, 214)">if</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(212, 212, 212)">(</span><span class="token class-name" style="color:rgb(78, 201, 176)">Pushe</span><span class="token punctuation" style="color:rgb(212, 212, 212)">.</span><span class="token function" style="color:rgb(220, 220, 170)">getFcmHandler</span><span class="token punctuation" style="color:rgb(212, 212, 212)">(</span><span class="token keyword" style="color:rgb(86, 156, 214)">this</span><span class="token punctuation" style="color:rgb(212, 212, 212)">)</span><span class="token punctuation" style="color:rgb(212, 212, 212)">.</span><span class="token function" style="color:rgb(220, 220, 170)">onMessageReceived</span><span class="token punctuation" style="color:rgb(212, 212, 212)">(</span><span class="token plain">remoteMessage</span><span class="token punctuation" style="color:rgb(212, 212, 212)">)</span><span class="token punctuation" style="color:rgb(212, 212, 212)">)</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(212, 212, 212)">{</span><span class="token plain"></span></div><div class="token-line" style="color:#9CDCFE"><span class="token plain">            </span><span class="token comment" style="color:rgb(106, 153, 85)">// Message belongs to Pushe, no further action needed</span><span class="token plain"></span></div><div class="token-line" style="color:#9CDCFE"><span class="token plain">            </span><span class="token keyword" style="color:rgb(86, 156, 214)">return</span><span class="token punctuation" style="color:rgb(212, 212, 212)">;</span><span class="token plain">   </span></div><div class="token-line" style="color:#9CDCFE"><span class="token plain">        </span><span class="token punctuation" style="color:rgb(212, 212, 212)">}</span><span class="token plain"></span></div><div class="token-line" style="color:#9CDCFE"><span class="token plain" style="display:inline-block"></span></div><div class="token-line" style="color:#9CDCFE"><span class="token plain">        </span><span class="token comment" style="color:rgb(106, 153, 85)">// Message does not belong to Pushe, process message...</span><span class="token plain"></span></div><div class="token-line" style="color:#9CDCFE"><span class="token plain">    </span><span class="token punctuation" style="color:rgb(212, 212, 212)">}</span><span class="token plain"></span></div><div class="token-line" style="color:#9CDCFE"><span class="token plain" style="display:inline-block"></span></div><div class="token-line" style="color:#9CDCFE"><span class="token plain">    </span><span class="token annotation punctuation" style="color:rgb(212, 212, 212)">@Override</span><span class="token plain"></span></div><div class="token-line" style="color:#9CDCFE"><span class="token plain">    </span><span class="token keyword" style="color:rgb(86, 156, 214)">public</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(86, 156, 214)">void</span><span class="token plain"> </span><span class="token function" style="color:rgb(220, 220, 170)">onNewToken</span><span class="token punctuation" style="color:rgb(212, 212, 212)">(</span><span class="token class-name" style="color:rgb(78, 201, 176)">String</span><span class="token plain"> s</span><span class="token punctuation" style="color:rgb(212, 212, 212)">)</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(212, 212, 212)">{</span><span class="token plain"></span></div><div class="token-line" style="color:#9CDCFE"><span class="token plain">        </span><span class="token class-name" style="color:rgb(78, 201, 176)">Pushe</span><span class="token punctuation" style="color:rgb(212, 212, 212)">.</span><span class="token function" style="color:rgb(220, 220, 170)">getFcmHandler</span><span class="token punctuation" style="color:rgb(212, 212, 212)">(</span><span class="token keyword" style="color:rgb(86, 156, 214)">this</span><span class="token punctuation" style="color:rgb(212, 212, 212)">)</span><span class="token punctuation" style="color:rgb(212, 212, 212)">.</span><span class="token function" style="color:rgb(220, 220, 170)">onNewToken</span><span class="token punctuation" style="color:rgb(212, 212, 212)">(</span><span class="token plain">s</span><span class="token punctuation" style="color:rgb(212, 212, 212)">)</span><span class="token punctuation" style="color:rgb(212, 212, 212)">;</span><span class="token plain"></span></div><div class="token-line" style="color:#9CDCFE"><span class="token plain">    </span><span class="token punctuation" style="color:rgb(212, 212, 212)">}</span><span class="token plain"></span></div><div class="token-line" style="color:#9CDCFE"><span class="token plain" style="display:inline-block"></span></div><div class="token-line" style="color:#9CDCFE"><span class="token plain">    </span><span class="token annotation punctuation" style="color:rgb(212, 212, 212)">@Override</span><span class="token plain"></span></div><div class="token-line" style="color:#9CDCFE"><span class="token plain">    </span><span class="token keyword" style="color:rgb(86, 156, 214)">public</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(86, 156, 214)">void</span><span class="token plain"> </span><span class="token function" style="color:rgb(220, 220, 170)">onMessageSent</span><span class="token punctuation" style="color:rgb(212, 212, 212)">(</span><span class="token class-name" style="color:rgb(78, 201, 176)">String</span><span class="token plain"> s</span><span class="token punctuation" style="color:rgb(212, 212, 212)">)</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(212, 212, 212)">{</span><span class="token plain"></span></div><div class="token-line" style="color:#9CDCFE"><span class="token plain">        </span><span class="token class-name" style="color:rgb(78, 201, 176)">Pushe</span><span class="token punctuation" style="color:rgb(212, 212, 212)">.</span><span class="token function" style="color:rgb(220, 220, 170)">getFcmHandler</span><span class="token punctuation" style="color:rgb(212, 212, 212)">(</span><span class="token keyword" style="color:rgb(86, 156, 214)">this</span><span class="token punctuation" style="color:rgb(212, 212, 212)">)</span><span class="token punctuation" style="color:rgb(212, 212, 212)">.</span><span class="token function" style="color:rgb(220, 220, 170)">onMessageSent</span><span class="token punctuation" style="color:rgb(212, 212, 212)">(</span><span class="token plain">s</span><span class="token punctuation" style="color:rgb(212, 212, 212)">)</span><span class="token punctuation" style="color:rgb(212, 212, 212)">;</span><span class="token plain"></span></div><div class="token-line" style="color:#9CDCFE"><span class="token plain">    </span><span class="token punctuation" style="color:rgb(212, 212, 212)">}</span><span class="token plain"></span></div><div class="token-line" style="color:#9CDCFE"><span class="token plain" style="display:inline-block"></span></div><div class="token-line" style="color:#9CDCFE"><span class="token plain">    </span><span class="token annotation punctuation" style="color:rgb(212, 212, 212)">@Override</span><span class="token plain"></span></div><div class="token-line" style="color:#9CDCFE"><span class="token plain">    </span><span class="token keyword" style="color:rgb(86, 156, 214)">public</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(86, 156, 214)">void</span><span class="token plain"> </span><span class="token function" style="color:rgb(220, 220, 170)">onSendError</span><span class="token punctuation" style="color:rgb(212, 212, 212)">(</span><span class="token class-name" style="color:rgb(78, 201, 176)">String</span><span class="token plain"> s</span><span class="token punctuation" style="color:rgb(212, 212, 212)">,</span><span class="token plain"> </span><span class="token class-name" style="color:rgb(78, 201, 176)">Exception</span><span class="token plain"> e</span><span class="token punctuation" style="color:rgb(212, 212, 212)">)</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(212, 212, 212)">{</span><span class="token plain"></span></div><div class="token-line" style="color:#9CDCFE"><span class="token plain">        </span><span class="token class-name" style="color:rgb(78, 201, 176)">Pushe</span><span class="token punctuation" style="color:rgb(212, 212, 212)">.</span><span class="token function" style="color:rgb(220, 220, 170)">getFcmHandler</span><span class="token punctuation" style="color:rgb(212, 212, 212)">(</span><span class="token keyword" style="color:rgb(86, 156, 214)">this</span><span class="token punctuation" style="color:rgb(212, 212, 212)">)</span><span class="token punctuation" style="color:rgb(212, 212, 212)">.</span><span class="token function" style="color:rgb(220, 220, 170)">onSendError</span><span class="token punctuation" style="color:rgb(212, 212, 212)">(</span><span class="token plain">s</span><span class="token punctuation" style="color:rgb(212, 212, 212)">,</span><span class="token plain"> e</span><span class="token punctuation" style="color:rgb(212, 212, 212)">)</span><span class="token punctuation" style="color:rgb(212, 212, 212)">;</span><span class="token plain"></span></div><div class="token-line" style="color:#9CDCFE"><span class="token plain">    </span><span class="token punctuation" style="color:rgb(212, 212, 212)">}</span><span class="token plain"></span></div><div class="token-line" style="color:#9CDCFE"><span class="token plain" style="display:inline-block"></span></div><div class="token-line" style="color:#9CDCFE"><span class="token plain">    </span><span class="token annotation punctuation" style="color:rgb(212, 212, 212)">@Override</span><span class="token plain"></span></div><div class="token-line" style="color:#9CDCFE"><span class="token plain">    </span><span class="token keyword" style="color:rgb(86, 156, 214)">public</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(86, 156, 214)">void</span><span class="token plain"> </span><span class="token function" style="color:rgb(220, 220, 170)">onDeletedMessages</span><span class="token punctuation" style="color:rgb(212, 212, 212)">(</span><span class="token punctuation" style="color:rgb(212, 212, 212)">)</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(212, 212, 212)">{</span><span class="token plain"></span></div><div class="token-line" style="color:#9CDCFE"><span class="token plain">        </span><span class="token class-name" style="color:rgb(78, 201, 176)">Pushe</span><span class="token punctuation" style="color:rgb(212, 212, 212)">.</span><span class="token function" style="color:rgb(220, 220, 170)">getFcmHandler</span><span class="token punctuation" style="color:rgb(212, 212, 212)">(</span><span class="token keyword" style="color:rgb(86, 156, 214)">this</span><span class="token punctuation" style="color:rgb(212, 212, 212)">)</span><span class="token punctuation" style="color:rgb(212, 212, 212)">.</span><span class="token function" style="color:rgb(220, 220, 170)">onDeletedMessages</span><span class="token punctuation" style="color:rgb(212, 212, 212)">(</span><span class="token punctuation" style="color:rgb(212, 212, 212)">)</span><span class="token punctuation" style="color:rgb(212, 212, 212)">;</span><span class="token plain"></span></div><div class="token-line" style="color:#9CDCFE"><span class="token plain">    </span><span class="token punctuation" style="color:rgb(212, 212, 212)">}</span><span class="token plain">    </span></div><div class="token-line" style="color:#9CDCFE"><span class="token plain"></span><span class="token punctuation" style="color:rgb(212, 212, 212)">}</span></div></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_1BYj">Copy</button></div></pre><p>هر بار که یک پیغام
FCM
به برنامه شما می‌رسد، تابع
<code>onMessageReceived</code>
کلاس شما صدا زده می‌شود. همانطور که در مثال بالا مشاهده می‌کنید در پیاده‌سازی این تابع، شما با استفاده از عبارت زیر پوشه را از دریافت پیغام مطلع می‌کنید:</p><pre class="mdxCodeBlock_iHAB"><div class="codeBlockWrapper_2QGZ"><pre class="prism-code language-java codeBlock_19pQ" style="color:#9CDCFE;background-color:#1E1E1E"><div class="token-line" style="color:#9CDCFE"><span class="token class-name" style="color:rgb(78, 201, 176)">Pushe</span><span class="token punctuation" style="color:rgb(212, 212, 212)">.</span><span class="token function" style="color:rgb(220, 220, 170)">getFcmHandler</span><span class="token punctuation" style="color:rgb(212, 212, 212)">(</span><span class="token keyword" style="color:rgb(86, 156, 214)">this</span><span class="token punctuation" style="color:rgb(212, 212, 212)">)</span><span class="token punctuation" style="color:rgb(212, 212, 212)">.</span><span class="token function" style="color:rgb(220, 220, 170)">onMessageRecevied</span><span class="token punctuation" style="color:rgb(212, 212, 212)">(</span><span class="token plain">remoteMessage</span><span class="token punctuation" style="color:rgb(212, 212, 212)">)</span></div></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_1BYj">Copy</button></div></pre><p>با این کار پیغام به دست پوشه نیز می‌رسد و اگر پیغام مربوط به کتابخانه‌ی پوشه باشد عملیات لازم بر روی آن انجام می‌شود. در صورتی که پیغام مربوط به پوشه باشد عبارت بالا مقدار
<code>true</code>
بر می‌گرداند و شما نیازی نیست عملیات بیشتری روی این پیغام انجام دهید. در صورتی که از عبارت بالا مقدار
<code>false</code>
گرفتید به این معنی است که پیغام مربوط به پوشه نیست و شما باید بسته به نیاز خود عملیات مورد نظر را برای آن انجام دهید.</p><p>سایر توابع کلاس تعریف شده زمان رخ دادن رویداد‌های مختلف مربوط به
FCM
صدا زده می‌شوند. همانطور که در مثال بالا نشان داده شده، نیاز است که شما هنگام رخ دادن این رویدادها با صدا زدن تابع مربوطه از کتابخانه‌ی پوشه، پوشه را از رخ دادن این رویدادها مطلع کنید.</p></div></article><div class="margin-vert--lg"><nav class="pagination-nav"><div class="pagination-nav__item"><a class="pagination-nav__link" href="/docs/android-studio/studio-channel"><h5 class="pagination-nav__link--sublabel">Previous</h5><h4 class="pagination-nav__link--label">« <!-- -->کانال نوتیفیکیشن</h4></a></div><div class="pagination-nav__item pagination-nav__item--next"><a class="pagination-nav__link" href="/docs/android-studio/studio-faq"><h5 class="pagination-nav__link--sublabel">Next</h5><h4 class="pagination-nav__link--label">FAQ<!-- --> »</h4></a></div></nav></div></div></div><div class="col col--3"><div class="tableOfContents_TbNY"><ul class="contents contents__left-border"><li><a href="#غیر-فعال-کردن-سرویس-fcm-پوشه" class="contents__link">غیر فعال کردن سرویس FCM پوشه</a></li><li><a href="#ایجاد-سرویس-fcm-برنامه" class="contents__link">ایجاد سرویس FCM برنامه</a></li><li><a href="#رساندن-پیغامها-و-رویدادها-به-پوشه" class="contents__link">رساندن پیغام‌ها و رویداد‌ها به پوشه</a></li></ul></div></div></div></div></div></div></main></div>
</div>

<script type="text/javascript" src="/runtime~main.dc9f3c42d6b610cb56fb.js"></script>

<script type="text/javascript" src="/main.b5961fb714a8f0150402.js"></script>

<script type="text/javascript" src="/0.2d62e2c53ebb06def3ae.js"></script>

<script type="text/javascript" src="/1.b473832731bca511a076.js"></script>

<script type="text/javascript" src="/component---theme-doc-page-1-be-9be.5365eed081863aea04fc.js"></script>

<script type="text/javascript" src="/docsMetadata---docsbe-2-5ec.60f92b3422a28701bec4.js"></script>

<script type="text/javascript" src="/component---theme-doc-item-178-a40.baad5ab4d7a1d4824518.js"></script>

<script type="text/javascript" src="/content---docs-android-studio-studio-fcm-050-afd.f4d1f3d1c84ac304c8f5.js"></script>

<script type="text/javascript" src="/metadata---docs-android-studio-studio-fcmdd-1-51f.d38f099a89b0f118c55d.js"></script>

</body>
</html>