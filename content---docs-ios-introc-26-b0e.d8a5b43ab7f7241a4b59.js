/*! For license information please see content---docs-ios-introc-26-b0e.d8a5b43ab7f7241a4b59.js.LICENSE */
(window.webpackJsonp=window.webpackJsonp||[]).push([[72],{262:function(e,t,n){"use strict";n.r(t),n.d(t,"frontMatter",(function(){return c})),n.d(t,"rightToc",(function(){return s})),n.d(t,"default",(function(){return b}));n(0);var a=n(297),i=n(299),r=n(300);function o(){return(o=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e}).apply(this,arguments)}function l(e,t){if(null==e)return{};var n,a,i=function(e,t){if(null==e)return{};var n,a,i={},r=Object.keys(e);for(a=0;a<r.length;a++)n=r[a],t.indexOf(n)>=0||(i[n]=e[n]);return i}(e,t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);for(a=0;a<r.length;a++)n=r[a],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}var c={id:"intro",title:"نصب و راه‌اندازی پوشه در Xcode",sidebar_label:"راه‌اندازی سریع"},s=[{value:"پیش‌نیازها",id:"پیشنیازها",children:[]},{value:"نصب پوشه با استفاده از cocoapods",id:"نصب-پوشه-با-استفاده-از-cocoapods",children:[]},{value:"اضافه‌کردن کد‌های لازم",id:"اضافهکردن-کدهای-لازم",children:[]},{value:"تست و ثبت دستگاه در پوشه",id:"تست-و-ثبت-دستگاه-در-پوشه",children:[]},{value:"ادامه‌ی کار",id:"ادامهی-کار",children:[{value:"پروژه‌ی نمونه در گیت‌هاب",id:"پروژهی-نمونه-در-گیتهاب",children:[]},{value:"سوالات و مشکلات احتمالی",id:"سوالات-و-مشکلات-احتمالی",children:[]},{value:"مشاهده‌ی امکانات بیشتر",id:"مشاهدهی-امکانات-بیشتر",children:[]}]}],p={rightToc:s},u="wrapper";function b(e){var t=e.components,n=l(e,["components"]);return Object(a.b)(u,o({},p,n,{components:t,mdxType:"MDXLayout"}),Object(a.b)("h2",{id:"پیشنیازها"},"پیش‌نیازها"),Object(a.b)("ul",null,Object(a.b)("li",{parentName:"ul"},"برای داشتن امکان دریافت Push notification در برنامه خود، باید Apple Develeper Account داشته باشید."),Object(a.b)("li",{parentName:"ul"},"با استفاده از Apple Developer Account خود، یک کلید APNs ایجاد کنید. ",Object(a.b)("ul",{parentName:"li"},Object(a.b)("li",{parentName:"ul"},Object(a.b)("a",o({parentName:"li"},{href:"/docs/ios/extra/apns-key"}),"نحوه ایجاد کلید APNs")))),Object(a.b)("li",{parentName:"ul"},"در کنسول فایربیس یک پروژه ایجاد کنید و ‍",Object(a.b)("inlineCode",{parentName:"li"},"Server key")," و ",Object(a.b)("inlineCode",{parentName:"li"},"Sender ID")," دریافت کنید.",Object(a.b)("ul",{parentName:"li"},Object(a.b)("li",{parentName:"ul"},Object(a.b)("a",o({parentName:"li"},{href:"/docs/ios/extra/firebase"}),"نحوه دریافت Sender ID وServer key از فایربیس")))),Object(a.b)("li",{parentName:"ul"},"در کنسول فایربیس، یک برنامه متناظر با برنامه خود ایجاد کنید و ‍‍‍فایل ",Object(a.b)("inlineCode",{parentName:"li"},"GoogleService-Info.plist")," را دریافت کرده و به پروژه خود اضافه کنید. ",Object(a.b)("ul",{parentName:"li"},Object(a.b)("li",{parentName:"ul"},Object(a.b)("a",o({parentName:"li"},{href:"/docs/ios/extra/firebase"}),"نحوه دریافت Sender ID وServer key از فایربیس")))),Object(a.b)("li",{parentName:"ul"},"اپلیکشین خود را در ",Object(a.b)("strong",{parentName:"li"}," کنسول پوشه ")," ثبت کنید و appId متناظر با برنامه خود را دریافت کنید."),Object(a.b)("li",{parentName:"ul"},"دستگاه تست باید یک دستگاه فیزیکی باشد. (در حال حاضر simulatorهای Xcode از Push Notification پشتیبانی نمی‌کنند.)"),Object(a.b)("li",{parentName:"ul"},"قابلیت‌های موردنیاز را در Xcode به برنامه خود اضافه کنید.",Object(a.b)("ul",{parentName:"li"},Object(a.b)("li",{parentName:"ul"},Object(a.b)("a",o({parentName:"li"},{href:"/docs/ios/extra/capabilities"}),"نحوه فعال کردن قابلیت‌های موردنیاز برای دریافت Push Notification")))),Object(a.b)("li",{parentName:"ul"},"برای دریافت عکس، فیلم و ... در Pushe Notification، یک Notification Service Extension به برنامه خود اضافه کنید.",Object(a.b)("ul",{parentName:"li"},Object(a.b)("li",{parentName:"ul"},Object(a.b)("a",o({parentName:"li"},{href:"/docs/ios/extra/notification-service-extension"}),"نحوه اضافه کردن Notification Service Extension"))))),Object(a.b)("h2",{id:"نصب-پوشه-با-استفاده-از-cocoapods"},"نصب پوشه با استفاده از cocoapods"),Object(a.b)("p",null,"در ",Object(a.b)("strong",{parentName:"p"},Object(a.b)("inlineCode",{parentName:"strong"},"Podfile"))," پوشه را برای Target اصلی و Notification Service Extension اضافه کنید:"),Object(a.b)("pre",null,Object(a.b)("code",o({parentName:"pre"},{className:"language-ruby"}),"target 'PusheDemo' do\n    use_frameworks!\n        pod 'Pushe'\n\n    target 'PusheDemoTests' do\n        inherit! :search_paths\n        # Pods for testing\n    end\n\n    target 'PusheDemoUITests' do\n        inherit! :search_paths\n        # Pods for testing\n    end\n\nend\n\ntarget 'DemoNotificationServiceExtension' do\n    use_frameworks!\n        pod 'Pushe'\nend\n")),Object(a.b)("p",null,"سپس با دستور زیر می‌توانید پوشه را نصب کنید."),Object(a.b)("pre",null,Object(a.b)("code",o({parentName:"pre"},{className:"language-bash"}),"pod install\n")),Object(a.b)("p",null,"توجه کنید که ورژن ۰.۹.۰ آخرین ورژن پوشه برای iOS است که از xcode  ورژن ۱۱.۲ و swift ورژن ۵.۱.۲ پشتیبانی می‌کند. در صورتی‌که می‌خواهید ورژن خاصی از پوشه مثلا ورژن ۰.۹.۰ را نصب کنید، به جای "),Object(a.b)("pre",null,Object(a.b)("code",o({parentName:"pre"},{className:"language-ruby"}),"pod Pushe\n")),Object(a.b)("p",null,"از دستور"),Object(a.b)("pre",null,Object(a.b)("code",o({parentName:"pre"},{className:"language-ruby"}),"pod 'Pushe', '0.9.0'\n")),Object(a.b)("p",null,"استفاده کنید."),Object(a.b)("h2",{id:"اضافهکردن-کدهای-لازم"},"اضافه‌کردن کد‌های لازم"),Object(a.b)("p",null,"در Target مربوط به برنامه:"),Object(a.b)(i.a,{defaultValue:"swift",values:[{label:"Swift",value:"swift"},{label:"Objective-C",value:"objc"}],mdxType:"Tabs"},Object(a.b)(r.a,{value:"swift",mdxType:"TabItem"},Object(a.b)("pre",null,Object(a.b)("code",o({parentName:"pre"},{className:"language-swift"}),'// AppDelegate.swift file\n\nimport UIKit\nimport Pushe\n\n@UIApplicationMain\nclass AppDelegate: UIResponder, UIApplicationDelegate {\n\n    var window: UIWindow?\n\n    func application(_ application: UIApplication, didFinishLaunchingWithOptions launchOptions: [UIApplication.LaunchOptionsKey: Any]?) -> Bool {\n        PusheClient.shared.pusheDelegate = somethingImplementingPusheDelegate    // this line is optional\n        PusheClient.shared.start(pusheAppId: "enter your appId from pushe console here")\n        \n        return true\n    }\n}\n'))),Object(a.b)(r.a,{value:"objc",mdxType:"TabItem"},Object(a.b)("pre",null,Object(a.b)("code",o({parentName:"pre"},{className:"language-objc"}),'// AppDelegate.m file\n\n#import "AppDelegate.h"\n@import Pushe;\n\n@interface AppDelegate () <UNUserNotificationCenterDelegate>\n\n@end\n\n@implementation AppDelegate \n\n- (BOOL)application:(UIApplication *)application didFinishLaunchingWithOptions:(NSDictionary *)launchOptions {\n    PusheClient.shared.delegate = somethingImplementingPusheDelegate;    // this line is optional\n    [PusheClient.shared start:@"enter your appId from pushe console here"];\n    \n    return YES;\n}\n\n@end\n')))),Object(a.b)("p",null,"و در Target مربوط به ",Object(a.b)("inlineCode",{parentName:"p"},"NotificationServiceExtension"),":"),Object(a.b)(i.a,{defaultValue:"swift",values:[{label:"Swift",value:"swift"},{label:"Objective-C",value:"objc"}],mdxType:"Tabs"},Object(a.b)(r.a,{value:"swift",mdxType:"TabItem"},Object(a.b)("pre",null,Object(a.b)("code",o({parentName:"pre"},{className:"language-swift"}),"// NotificationService.swift.swift file\n\nimport UserNotifications\nimport Pushe\n\nclass NotificationService: UNNotificationServiceExtension {\n\n    var contentHandler: ((UNNotificationContent) -> Void)?\n    var bestAttemptContent: UNMutableNotificationContent?\n\n    override func didReceive(_ request: UNNotificationRequest, withContentHandler contentHandler: @escaping (UNNotificationContent) -> Void) {\n        self.contentHandler = contentHandler\n        self.bestAttemptContent = (request.content.mutableCopy() as? UNMutableNotificationContent)\n        \n        if let bestAttemptContent = self.bestAttemptContent {\n            PusheClient.shared.didReceiveNotificationExtensionRequest(mutableContent: bestAttemptContent, contentHandler: contentHandler)\n        }\n    }\n    \n    override func serviceExtensionTimeWillExpire() {\n        if let contentHandler = self.contentHandler, let bestAttemptContent =  self.bestAttemptContent {\n            contentHandler(bestAttemptContent)\n        }\n    }\n}\n"))),Object(a.b)(r.a,{value:"objc",mdxType:"TabItem"},Object(a.b)("pre",null,Object(a.b)("code",o({parentName:"pre"},{className:"language-objc"}),'// NotificationService.m file\n\n#import "NotificationService.h"\n@import Pushe;\n\n@interface NotificationService ()\n\n@property (nonatomic, strong) void (^contentHandler)(UNNotificationContent *contentToDeliver);\n@property (nonatomic, strong) UNMutableNotificationContent *bestAttemptContent;\n\n@end\n\n@implementation NotificationService\n\n- (void)didReceiveNotificationRequest:(UNNotificationRequest *)request withContentHandler:(void (^)(UNNotificationContent * _Nonnull))contentHandler { \n    self.contentHandler = contentHandler;\n    self.bestAttemptContent = [request.content mutableCopy];\n    \n    [PusheClient.shared didReceiveNotificationExtensionRequest:self.receivedRequest\n                      withMutableNotificationContent:self.bestAttemptContent];\n}\n\n- (void)serviceExtensionTimeWillExpire {\n    self.contentHandler(self.bestAttemptContent);\n}\n\n@end\n')))),Object(a.b)("p",null,"اگر مایل باشید، می‌توانید پروتکل ",Object(a.b)("inlineCode",{parentName:"p"},"pusheDelegate")," را پیاده‌سازی کنید تا بتوانید callbackهایی را در هنگام دریافت پوش‌نوتیفیکیشن، کلیک کاربر و ... اجرا کنید."),Object(a.b)("h2",{id:"تست-و-ثبت-دستگاه-در-پوشه"},"تست و ثبت دستگاه در پوشه"),Object(a.b)("p",null,"پس از اجرای برنامه و فراخوانی کد رجیستر پوشه، باید در ",Object(a.b)("strong",{parentName:"p"},"Xcode console")," لاگ‌های زیر را ببینید (ممکن است به دلیل ارتباط با سرور این پروسه چند ثانیه طول بکشد):"),Object(a.b)("pre",null,Object(a.b)("code",o({parentName:"pre"},{}),"registering in Pushe ...\n📗 -> successfully registered in Pushe\n")),Object(a.b)("br",null),Object(a.b)("br",null),Object(a.b)("h2",{id:"ادامهی-کار"},"ادامه‌ی کار"),Object(a.b)("p",null,"(بر روی لینک مورد نظر کلیک کنید)"),Object(a.b)("h3",{id:"پروژهی-نمونه-در-گیتهاب"},Object(a.b)("a",o({parentName:"h3"},{href:"https://github.com/pusheco/android-studio-sample"}),"پروژه‌ی نمونه در گیت‌هاب")),Object(a.b)("p",null,"بررسی امکانات در نمونه‌ای از قبل طراحی شده دارای تمام امکانات کتابخانه‌ی پوشه"),Object(a.b)("h3",{id:"سوالات-و-مشکلات-احتمالی"},Object(a.b)("a",o({parentName:"h3"},{href:"/docs/ios/errors"}),"سوالات و مشکلات احتمالی")),Object(a.b)("p",null,"در صورتی که در یکی از مراحل زیر به مشکلی برخوردید یا هر سوالی در مورد کتابخانه‌ دارید"),Object(a.b)("h3",{id:"مشاهدهی-امکانات-بیشتر"},Object(a.b)("a",o({parentName:"h3"},{href:"/docs/android-studio/studio-advanced"}),"مشاهده‌ی امکانات بیشتر")),Object(a.b)("p",null,"مشاهده‌ی امکانات پیشرفته ارائه‌ شده در کتابخانه‌‌ی پوشه"))}b.isMDXComponent=!0},297:function(e,t,n){"use strict";n.d(t,"a",(function(){return l})),n.d(t,"b",(function(){return u}));var a=n(0),i=n.n(a),r=i.a.createContext({}),o=function(e){var t=i.a.useContext(r),n=t;return e&&(n="function"==typeof e?e(t):Object.assign({},t,e)),n},l=function(e){var t=o(e.components);return i.a.createElement(r.Provider,{value:t},e.children)};var c="mdxType",s={inlineCode:"code",wrapper:function(e){var t=e.children;return i.a.createElement(i.a.Fragment,{},t)}},p=Object(a.forwardRef)((function(e,t){var n=e.components,a=e.mdxType,r=e.originalType,l=e.parentName,c=function(e,t){var n={};for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&-1===t.indexOf(a)&&(n[a]=e[a]);return n}(e,["components","mdxType","originalType","parentName"]),p=o(n),u=a,b=p[l+"."+u]||p[u]||s[u]||r;return n?i.a.createElement(b,Object.assign({},{ref:t},c,{components:n})):i.a.createElement(b,Object.assign({},{ref:t},c))}));function u(e,t){var n=arguments,a=t&&t.mdxType;if("string"==typeof e||a){var r=n.length,o=new Array(r);o[0]=p;var l={};for(var s in t)hasOwnProperty.call(t,s)&&(l[s]=t[s]);l.originalType=e,l[c]="string"==typeof e?e:a,o[1]=l;for(var u=2;u<r;u++)o[u]=n[u];return i.a.createElement.apply(null,o)}return i.a.createElement.apply(null,n)}p.displayName="MDXCreateElement"},298:function(e,t,n){var a;!function(){"use strict";var n={}.hasOwnProperty;function i(){for(var e=[],t=0;t<arguments.length;t++){var a=arguments[t];if(a){var r=typeof a;if("string"===r||"number"===r)e.push(a);else if(Array.isArray(a)&&a.length){var o=i.apply(null,a);o&&e.push(o)}else if("object"===r)for(var l in a)n.call(a,l)&&a[l]&&e.push(l)}}return e.join(" ")}e.exports?(i.default=i,e.exports=i):void 0===(a=function(){return i}.apply(t,[]))||(e.exports=a)}()},299:function(e,t,n){"use strict";var a=n(0),i=n.n(a),r=n(298),o=n.n(r);function l(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if(!(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e)))return;var n=[],a=!0,i=!1,r=void 0;try{for(var o,l=e[Symbol.iterator]();!(a=(o=l.next()).done)&&(n.push(o.value),!t||n.length!==t);a=!0);}catch(e){i=!0,r=e}finally{try{a||null==l.return||l.return()}finally{if(i)throw r}}return n}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}t.a=function(e){var t=e.block,n=e.children,r=e.defaultValue,c=e.values,s=l(Object(a.useState)(r),2),p=s[0],u=s[1];return i.a.createElement("div",null,i.a.createElement("ul",{className:o()("tabs",{"tabs--block":t})},c.map((function(e){var t=e.value,n=e.label;return i.a.createElement("li",{className:o()("tab-item",{"tab-item--active":p===t}),key:t,onClick:function(){return u(t)}},n)}))),i.a.createElement("div",{className:"margin-vert--md"},n.filter((function(e){return e.props.value===p}))[0]))}},300:function(e,t,n){"use strict";var a=n(0),i=n.n(a);t.a=function(e){return i.a.createElement("div",null,e.children)}}}]);